<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="/static/favicon.969f47677bd5.ico">

    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107304984-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments)};
      gtag('js', new Date());

      gtag('config', 'UA-107304984-1');
    </script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/main.436400ed2c94.css" media="screen" title="no title" charset="utf-8">

    <title>ORB-SLAM: a Versatile and Accurate Monocular SLAM System – arXiv Vanity</title>
    
  <meta name="description" content="Read this arXiv paper as a responsive web page with clickable citations.">

  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:url" content="https://www.arxiv-vanity.com/papers/1502.00956/">
  <meta property="og:title" content="ORB-SLAM: a Versatile and Accurate Monocular SLAM System">
  <meta property="og:description" content="This paper presents ORB-SLAM, a feature-based monocular SLAM system that operates in real time, in small and large, indoor and outdoor environments. The system is robust to severe motion clutter,
allows wide baseline loop closing and relocalization, and includes full automatic initialization. Building on excellent algorithms of recent years, we designed from scratch a novel system that uses the same features for all SLAM tasks: tracking, mapping, relocalization, and loop closing. A survival of the fittest strategy
that selects the points and keyframes of the reconstruction leads to excellent robustness and generates a compact and trackable map that only grows if the scene content changes, allowing
lifelong operation. We present an exhaustive evaluation in 27 sequences from the most popular datasets. ORB-SLAM achieves unprecedented performance with respect to other state-of-the-art monocular SLAM approaches.
For the benefit of the community, we make the source code public.">
  <meta property="og:image" content="https://media.arxiv-vanity.com/render-output/5535659/x1.png">

  
  <meta name="citation_title" content="ORB-SLAM: a Versatile and Accurate Monocular SLAM System">
  <meta name="citation_author" content="Raul Mur-Artal"><meta name="citation_author" content="J. M. M. Montiel"><meta name="citation_author" content="Juan D. Tardos">
  <meta name="citation_date" content="2015/02/03">
  <meta name="citation_pdf_url" content="https://arxiv.org/pdf/1502.00956">
  <meta name="citation_arxiv_id" content="1502.00956">

  <link rel="stylesheet" href="https://media.arxiv-vanity.com/render-output/5535659/index.css" type="text/css">


  <style type="text/css">.mjx-chtml {display: inline-block; line-height: 0; text-indent: 0; text-align: left; text-transform: none; font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; letter-spacing: normal; word-wrap: normal; word-spacing: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; margin: 0; padding: 1px 0}
.MJXc-display {display: block; text-align: center; margin: 1em 0; padding: 0}
.mjx-chtml[tabindex]:focus, body :focus .mjx-chtml[tabindex] {display: inline-table}
.mjx-full-width {text-align: center; display: table-cell!important; width: 10000em}
.mjx-math {display: inline-block; border-collapse: separate; border-spacing: 0}
.mjx-math * {display: inline-block; -webkit-box-sizing: content-box!important; -moz-box-sizing: content-box!important; box-sizing: content-box!important; text-align: left}
.mjx-numerator {display: block; text-align: center}
.mjx-denominator {display: block; text-align: center}
.MJXc-stacked {height: 0; position: relative}
.MJXc-stacked > * {position: absolute}
.MJXc-bevelled > * {display: inline-block}
.mjx-stack {display: inline-block}
.mjx-op {display: block}
.mjx-under {display: table-cell}
.mjx-over {display: block}
.mjx-over > * {padding-left: 0px!important; padding-right: 0px!important}
.mjx-under > * {padding-left: 0px!important; padding-right: 0px!important}
.mjx-stack > .mjx-sup {display: block}
.mjx-stack > .mjx-sub {display: block}
.mjx-prestack > .mjx-presup {display: block}
.mjx-prestack > .mjx-presub {display: block}
.mjx-delim-h > .mjx-char {display: inline-block}
.mjx-surd {vertical-align: top}
.mjx-mphantom * {visibility: hidden}
.mjx-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 2px 3px; font-style: normal; font-size: 90%}
.mjx-annotation-xml {line-height: normal}
.mjx-menclose > svg {fill: none; stroke: currentColor}
.mjx-mtr {display: table-row}
.mjx-mlabeledtr {display: table-row}
.mjx-mtd {display: table-cell; text-align: center}
.mjx-label {display: table-row}
.mjx-box {display: inline-block}
.mjx-block {display: block}
.mjx-span {display: inline}
.mjx-char {display: block; white-space: pre}
.mjx-itable {display: inline-table; width: auto}
.mjx-row {display: table-row}
.mjx-cell {display: table-cell}
.mjx-table {display: table; width: 100%}
.mjx-line {display: block; height: 0}
.mjx-strut {width: 0; padding-top: 1em}
.mjx-vsize {width: 0}
.MJXc-space1 {margin-left: .167em}
.MJXc-space2 {margin-left: .222em}
.MJXc-space3 {margin-left: .278em}
.mjx-test.mjx-test-display {display: table!important}
.mjx-test.mjx-test-inline {display: inline!important; margin-right: -1px}
.mjx-test.mjx-test-default {display: block!important; clear: both}
.mjx-ex-box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60ex}
.mjx-test-inline .mjx-left-box {display: inline-block; width: 0; float: left}
.mjx-test-inline .mjx-right-box {display: inline-block; width: 0; float: right}
.mjx-test-display .mjx-right-box {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MJXc-TeX-unknown-R {font-family: monospace; font-style: normal; font-weight: normal}
.MJXc-TeX-unknown-I {font-family: monospace; font-style: italic; font-weight: normal}
.MJXc-TeX-unknown-B {font-family: monospace; font-style: normal; font-weight: bold}
.MJXc-TeX-unknown-BI {font-family: monospace; font-style: italic; font-weight: bold}
.MJXc-TeX-ams-R {font-family: MJXc-TeX-ams-R,MJXc-TeX-ams-Rw}
.MJXc-TeX-cal-B {font-family: MJXc-TeX-cal-B,MJXc-TeX-cal-Bx,MJXc-TeX-cal-Bw}
.MJXc-TeX-frak-R {font-family: MJXc-TeX-frak-R,MJXc-TeX-frak-Rw}
.MJXc-TeX-frak-B {font-family: MJXc-TeX-frak-B,MJXc-TeX-frak-Bx,MJXc-TeX-frak-Bw}
.MJXc-TeX-math-BI {font-family: MJXc-TeX-math-BI,MJXc-TeX-math-BIx,MJXc-TeX-math-BIw}
.MJXc-TeX-sans-R {font-family: MJXc-TeX-sans-R,MJXc-TeX-sans-Rw}
.MJXc-TeX-sans-B {font-family: MJXc-TeX-sans-B,MJXc-TeX-sans-Bx,MJXc-TeX-sans-Bw}
.MJXc-TeX-sans-I {font-family: MJXc-TeX-sans-I,MJXc-TeX-sans-Ix,MJXc-TeX-sans-Iw}
.MJXc-TeX-script-R {font-family: MJXc-TeX-script-R,MJXc-TeX-script-Rw}
.MJXc-TeX-type-R {font-family: MJXc-TeX-type-R,MJXc-TeX-type-Rw}
.MJXc-TeX-cal-R {font-family: MJXc-TeX-cal-R,MJXc-TeX-cal-Rw}
.MJXc-TeX-main-B {font-family: MJXc-TeX-main-B,MJXc-TeX-main-Bx,MJXc-TeX-main-Bw}
.MJXc-TeX-main-I {font-family: MJXc-TeX-main-I,MJXc-TeX-main-Ix,MJXc-TeX-main-Iw}
.MJXc-TeX-main-R {font-family: MJXc-TeX-main-R,MJXc-TeX-main-Rw}
.MJXc-TeX-math-I {font-family: MJXc-TeX-math-I,MJXc-TeX-math-Ix,MJXc-TeX-math-Iw}
.MJXc-TeX-size1-R {font-family: MJXc-TeX-size1-R,MJXc-TeX-size1-Rw}
.MJXc-TeX-size2-R {font-family: MJXc-TeX-size2-R,MJXc-TeX-size2-Rw}
.MJXc-TeX-size3-R {font-family: MJXc-TeX-size3-R,MJXc-TeX-size3-Rw}
.MJXc-TeX-size4-R {font-family: MJXc-TeX-size4-R,MJXc-TeX-size4-Rw}
.MJXc-TeX-vec-R {font-family: MJXc-TeX-vec-R,MJXc-TeX-vec-Rw}
.MJXc-TeX-vec-B {font-family: MJXc-TeX-vec-B,MJXc-TeX-vec-Bx,MJXc-TeX-vec-Bw}
@font-face {font-family: MJXc-TeX-ams-R; src: local('MathJax_AMS'), local('MathJax_AMS-Regular')}
@font-face {font-family: MJXc-TeX-ams-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_AMS-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-cal-B; src: local('MathJax_Caligraphic Bold'), local('MathJax_Caligraphic-Bold')}
@font-face {font-family: MJXc-TeX-cal-Bx; src: local('MathJax_Caligraphic'); font-weight: bold}
@font-face {font-family: MJXc-TeX-cal-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-frak-R; src: local('MathJax_Fraktur'), local('MathJax_Fraktur-Regular')}
@font-face {font-family: MJXc-TeX-frak-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-frak-B; src: local('MathJax_Fraktur Bold'), local('MathJax_Fraktur-Bold')}
@font-face {font-family: MJXc-TeX-frak-Bx; src: local('MathJax_Fraktur'); font-weight: bold}
@font-face {font-family: MJXc-TeX-frak-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-math-BI; src: local('MathJax_Math BoldItalic'), local('MathJax_Math-BoldItalic')}
@font-face {font-family: MJXc-TeX-math-BIx; src: local('MathJax_Math'); font-weight: bold; font-style: italic}
@font-face {font-family: MJXc-TeX-math-BIw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Math-BoldItalic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Math-BoldItalic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Math-BoldItalic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-R; src: local('MathJax_SansSerif'), local('MathJax_SansSerif-Regular')}
@font-face {font-family: MJXc-TeX-sans-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-B; src: local('MathJax_SansSerif Bold'), local('MathJax_SansSerif-Bold')}
@font-face {font-family: MJXc-TeX-sans-Bx; src: local('MathJax_SansSerif'); font-weight: bold}
@font-face {font-family: MJXc-TeX-sans-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-I; src: local('MathJax_SansSerif Italic'), local('MathJax_SansSerif-Italic')}
@font-face {font-family: MJXc-TeX-sans-Ix; src: local('MathJax_SansSerif'); font-style: italic}
@font-face {font-family: MJXc-TeX-sans-Iw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Italic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-script-R; src: local('MathJax_Script'), local('MathJax_Script-Regular')}
@font-face {font-family: MJXc-TeX-script-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Script-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Script-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Script-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-type-R; src: local('MathJax_Typewriter'), local('MathJax_Typewriter-Regular')}
@font-face {font-family: MJXc-TeX-type-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Typewriter-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Typewriter-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Typewriter-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-cal-R; src: local('MathJax_Caligraphic'), local('MathJax_Caligraphic-Regular')}
@font-face {font-family: MJXc-TeX-cal-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-B; src: local('MathJax_Main Bold'), local('MathJax_Main-Bold')}
@font-face {font-family: MJXc-TeX-main-Bx; src: local('MathJax_Main'); font-weight: bold}
@font-face {font-family: MJXc-TeX-main-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Main-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-I; src: local('MathJax_Main Italic'), local('MathJax_Main-Italic')}
@font-face {font-family: MJXc-TeX-main-Ix; src: local('MathJax_Main'); font-style: italic}
@font-face {font-family: MJXc-TeX-main-Iw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Main-Italic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-R; src: local('MathJax_Main'), local('MathJax_Main-Regular')}
@font-face {font-family: MJXc-TeX-main-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Main-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-math-I; src: local('MathJax_Math Italic'), local('MathJax_Math-Italic')}
@font-face {font-family: MJXc-TeX-math-Ix; src: local('MathJax_Math'); font-style: italic}
@font-face {font-family: MJXc-TeX-math-Iw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Math-Italic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size1-R; src: local('MathJax_Size1'), local('MathJax_Size1-Regular')}
@font-face {font-family: MJXc-TeX-size1-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Size1-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size2-R; src: local('MathJax_Size2'), local('MathJax_Size2-Regular')}
@font-face {font-family: MJXc-TeX-size2-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Size2-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size3-R; src: local('MathJax_Size3'), local('MathJax_Size3-Regular')}
@font-face {font-family: MJXc-TeX-size3-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Size3-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size4-R; src: local('MathJax_Size4'), local('MathJax_Size4-Regular')}
@font-face {font-family: MJXc-TeX-size4-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Size4-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-vec-R; src: local('MathJax_Vector'), local('MathJax_Vector-Regular')}
@font-face {font-family: MJXc-TeX-vec-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Vector-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Vector-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Vector-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-vec-B; src: local('MathJax_Vector Bold'), local('MathJax_Vector-Bold')}
@font-face {font-family: MJXc-TeX-vec-Bx; src: local('MathJax_Vector'); font-weight: bold}
@font-face {font-family: MJXc-TeX-vec-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Vector-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Vector-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Vector-Bold.otf') format('opentype')}
</style>
  
  <link rel="stylesheet" href="/static/css/feedback.66d4b7e27124.css" media="screen" title="no title" charset="utf-8">


    <!-- start Mixpanel --><script type="text/javascript">(function(c,a){if(!a.__SV){var b=window;try{var d,m,j,k=b.location,f=k.hash;d=function(a,b){return(m=a.match(RegExp(b+"=([^&]*)")))?m[1]:null};f&&d(f,"state")&&(j=JSON.parse(decodeURIComponent(d(f,"state"))),"mpeditor"===j.action&&(b.sessionStorage.setItem("_mpcehash",f),history.replaceState(j.desiredHash||"",c.title,k.pathname+k.search)))}catch(n){}var l,h;window.mixpanel=a;a._i=[];a.init=function(b,d,g){function c(b,i){var a=i.split(".");2==a.length&&(b=b[a[0]],i=a[1]);b[i]=function(){b.push([i].concat(Array.prototype.slice.call(arguments,
    0)))}}var e=a;"undefined"!==typeof g?e=a[g]=[]:g="mixpanel";e.people=e.people||[];e.toString=function(b){var a="mixpanel";"mixpanel"!==g&&(a+="."+g);b||(a+=" (stub)");return a};e.people.toString=function(){return e.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
    for(h=0;h<l.length;h++)c(e,l[h]);var f="set set_once union unset remove delete".split(" ");e.get_group=function(){function a(c){b[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));e.push([d,call2])}}for(var b={},d=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<f.length;c++)a(f[c]);return b};a._i.push([b,d,g])};a.__SV=1.2;b=c.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
    MIXPANEL_CUSTOM_LIB_URL:"file:"===c.location.protocol&&"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js";d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}})(document,window.mixpanel||[]);
    mixpanel.init("84f8e700b4cf5e8ad68b553496eb72cf");</script><!-- end Mixpanel -->
  </head>
  <body>
    
  <div class="arxiv-vanity-wrapper">
  <nav>
    <p>
      <a href="/">arXiv Vanity</a> renders academic papers from
      <a href="https://arxiv.org/">arXiv</a> as responsive web pages so you
      don&rsquo;t have to squint at a PDF
    </p>
    <a href="https://arxiv.org/abs/1502.00956" class="btn btn-primary"
      >View this paper on arXiv</a
    >
  </nav>
</div>





    
  
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">ORB-SLAM: a Versatile and Accurate
<br class="ltx_break"/>Monocular SLAM System</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Raúl Mur-Artal*,
J. M. M. Montiel, 
and Juan D. Tardós, 


</span><span class="ltx_author_notes"><span>This work was supported by the Dirección General de Investigación of Spain
under Project DPI2012-32168, the Ministerio de Educación Scholarship FPU13/04175 and Gobierno de Aragón Scholarship B121/13.The authors are with the Instituto de Investigación en Ingeniería de Aragón (I3A), Universidad de Zaragoza,
María de Luna 1, 50018 Zaragoza, Spain (e-mail: ; ; ).* Corresponding author.</span></span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p">This paper presents ORB-SLAM, a feature-based monocular SLAM system that operates in real time, in small and large, indoor and outdoor environments. The system is robust to severe motion clutter,
allows wide baseline loop closing and relocalization, and includes full automatic initialization. Building on excellent algorithms of recent years, we designed from scratch a novel system that uses the same features for all SLAM tasks: tracking, mapping, relocalization, and loop closing. A survival of the fittest strategy
that selects the points and keyframes of the reconstruction leads to excellent robustness and generates a compact and trackable map that only grows if the scene content changes, allowing
lifelong operation. We present an exhaustive evaluation in 27 sequences from the most popular datasets. ORB-SLAM achieves unprecedented performance with respect to other state-of-the-art monocular SLAM approaches.
For the benefit of the community, we make the source code public.</p>
</div>
<div class="ltx_keywords">
Lifelong Mapping, Localization, Monocular Vision, Recognition, SLAM

</div>
<div id="p1" class="ltx_para ltx_noindent ltx_align_center">
<br class="ltx_break"/>
<p class="ltx_p">This paper has been accepted for publication in <em class="ltx_emph ltx_font_italic">IEEE Transactions on Robotics</em>.</p>
<br class="ltx_break"/>
<p class="ltx_p">DOI: <a href="https://dx.doi.org/10.1109/TRO.2015.2463671" title="" class="ltx_ref ltx_href" target="_blank">10.1109/TRO.2015.2463671</a></p>
<p class="ltx_p">IEEE Xplore: <a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=7219438" title="" class="ltx_ref ltx_url ltx_font_typewriter" target="_blank">http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=7219438</a></p>
</div>
<div id="p2" class="ltx_para">
<p class="ltx_p">©2015 IEEE.
Personal use of this material is permitted. Permission
from IEEE must be obtained for all other uses, in any current or
future media, including reprinting
/republishing this material for
advertising or promotional purposes,
creating new collective works, for resale or
redistribution to servers or lists, or reuse of any copyrighted
component of this work in other works.</p>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">I </span><span class="ltx_text ltx_font_smallcaps">Introduction</span>
</h2>

<div id="S1.p1" class="ltx_para">
<p class="ltx_p">Bundle Adjustment (BA) is known to provide accurate estimates of camera localizations as well as a sparse geometrical reconstruction <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref" target="_blank">1</a>, <a href="#bib.bib2" title="" class="ltx_ref" target="_blank">2</a>]</cite>,
given that a strong network of matches and good initial guesses are provided. For long time this approach was considered unaffordable for real time applications such
as Visual Simultaneous Localisation and Mapping (Visual SLAM). Visual SLAM has the goal of estimating the camera trajectory while reconstructing the environment.
Nowadays we know that to achieve accurate results at non-prohibitive computational cost, a real time SLAM algorithm has to provide BA with:</p>
</div>
<div id="S1.p2" class="ltx_para">
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item">
<div id="S1.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Corresponding observations of scene features (map points) among a subset of selected frames (keyframes).</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item">
<div id="S1.I1.i2.p1" class="ltx_para">
<p class="ltx_p">As complexity grows with the number of keyframes, their selection should avoid unnecessary redundancy.</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item">
<div id="S1.I1.i3.p1" class="ltx_para">
<p class="ltx_p">A strong network configuration of keyframes and points to produce accurate results, that is,
a well spread set of keyframes observing points with significant parallax and with plenty of loop closure matches.</p>
</div>
</li>
<li id="S1.I1.i4" class="ltx_item">
<div id="S1.I1.i4.p1" class="ltx_para">
<p class="ltx_p">An initial estimation of the keyframe poses and point locations for the non-linear optimization.</p>
</div>
</li>
<li id="S1.I1.i5" class="ltx_item">
<div id="S1.I1.i5.p1" class="ltx_para">
<p class="ltx_p">A local map in exploration where optimization is focused to achieve scalability.</p>
</div>
</li>
<li id="S1.I1.i6" class="ltx_item">
<div id="S1.I1.i6.p1" class="ltx_para">
<p class="ltx_p">The ability to perform fast global optimizations (e.g. pose graph) to close loops in real-time.</p>
</div>
</li>
</ul>
</div>
<div id="S1.p3" class="ltx_para">
<p class="ltx_p">The first real time application of BA was the visual odometry work of Mouragon et. al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref" target="_blank">3</a>]</cite>, followed by the ground breaking SLAM work of Klein and Murray <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref" target="_blank">4</a>]</cite>, known
as Parallel Tracking and Mapping (PTAM). This algorithm, while limited to small scale operation, provides simple but effective methods for keyframe selection,
feature matching, point triangulation, camera localization for every frame, and relocalization after tracking failure. Unfortunately several factors severely limit its application: lack of loop closing and adequate handling of
occlusions, low invariance to viewpoint of the relocalization and the need of human intervention for map bootstrapping.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p class="ltx_p">In this work we build on the main ideas of PTAM, the place recognition work of Gálvez-López and Tardós <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref" target="_blank">5</a>]</cite>, the scale-aware loop closing
of Strasdat et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref" target="_blank">6</a>]</cite> and the use of covisibility information for large scale operation <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref" target="_blank">7</a>, <a href="#bib.bib8" title="" class="ltx_ref" target="_blank">8</a>]</cite>, to
design from scratch ORB-SLAM, a novel monocular SLAM system whose main contributions are:</p>
</div>
<div id="S1.p5" class="ltx_para">
<ul id="S1.I2" class="ltx_itemize">
<li id="S1.I2.i1" class="ltx_item">
<div id="S1.I2.i1.p1" class="ltx_para">
<p class="ltx_p">Use of the same features for all tasks: tracking, mapping, relocalization and loop closing. This makes our system more efficient, simple and reliable.
We use ORB features <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref" target="_blank">9</a>]</cite> which allow real-time performance without GPUs, providing good invariance to changes in viewpoint and
illumination.</p>
</div>
</li>
<li id="S1.I2.i2" class="ltx_item">
<div id="S1.I2.i2.p1" class="ltx_para">
<p class="ltx_p">Real time operation in large environments. Thanks to the use of a covisibility graph, tracking and mapping is focused in a local covisible area, independent of global map size.</p>
</div>
</li>
<li id="S1.I2.i3" class="ltx_item">
<div id="S1.I2.i3.p1" class="ltx_para">
<p class="ltx_p">Real time loop closing based on the optimization of a pose graph that we call the <em class="ltx_emph ltx_font_italic">Essential Graph</em>. It is
built from a spanning tree maintained by the system, loop closure links and strong edges from the covisibility graph.</p>
</div>
</li>
<li id="S1.I2.i4" class="ltx_item">
<div id="S1.I2.i4.p1" class="ltx_para">
<p class="ltx_p">Real time camera relocalization with significant invariance to viewpoint and illumination. This allows recovery from tracking failure and also enhances
map reuse.</p>
</div>
</li>
<li id="S1.I2.i5" class="ltx_item">
<div id="S1.I2.i5.p1" class="ltx_para">
<p class="ltx_p">A new automatic and robust initialization procedure based on model selection that permits to create an initial map of
planar and non-planar scenes.</p>
</div>
</li>
<li id="S1.I2.i6" class="ltx_item">
<div id="S1.I2.i6.p1" class="ltx_para">
<p class="ltx_p">A <em class="ltx_emph ltx_font_italic">survival of the fittest</em> approach to map point and keyframe selection that is generous in the spawning but
very restrictive in the culling. This policy improves tracking robustness, and enhances lifelong operation because redundant keyframes are discarded.</p>
</div>
</li>
</ul>
</div>
<div id="S1.p6" class="ltx_para">
<p class="ltx_p">We present an extensive evaluation in popular public datasets from indoor and outdoor environments, including hand-held, car and robot sequences.
Notably, we achieve better camera localization accuracy than the state of the art in direct methods <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref" target="_blank">10</a>]</cite>, which optimize
directly over pixel intensities instead of feature reprojection errors. We include a discussion in Section <a href="#S9.SS2" title="IX-B Sparse/Feature-based vs. Dense/Direct Methods ‣ IX Conclusions and Discussion ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">IX-B</span></a> on the possible causes that
can make feature-based methods more accurate than direct methods.</p>
</div>
<div id="S1.p7" class="ltx_para">
<p class="ltx_p">The loop closing and relocalization methods here presented are based on our previous work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref" target="_blank">11</a>]</cite>. A preliminary
version of the system was presented in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref" target="_blank">12</a>]</cite>. In the current paper we add the initialization method, the <em class="ltx_emph ltx_font_italic">Essential Graph</em>,
and perfect all methods involved. We also describe in detail all building blocks and perform an exhaustive experimental validation.</p>
</div>
<div id="S1.p8" class="ltx_para">
<p class="ltx_p">To the best of our knowledge, this is the most complete and reliable solution to monocular SLAM, and for the benefit of the community
we make the source code public. Demonstration videos and the code can be found in our project webpage<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span><a href="http://webdiis.unizar.es/~raulmur/orbslam" title="" class="ltx_ref ltx_url ltx_font_typewriter" target="_blank">http://webdiis.unizar.es/~raulmur/orbslam</a></span></span></span>.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">Ii </span><span class="ltx_text ltx_font_smallcaps">Related Work</span>
</h2>

<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Ii-a </span><span class="ltx_text ltx_font_italic">Place Recognition</span>
</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p class="ltx_p">The survey by Williams et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref" target="_blank">13</a>]</cite> compared several approaches for place recognition and
concluded that techniques based on appearance, that is image to image matching,
scale better in large environments than map to map or image to map methods.
Within appearance based methods, bags of words techniques <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref" target="_blank">14</a>]</cite>, such as the probabilistic approach FAB-MAP <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref" target="_blank">15</a>]</cite>, are to the fore
because of their high efficiency.
DBoW2 <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref" target="_blank">5</a>]</cite> used for the first time bags of binary words obtained from
BRIEF descriptors <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref" target="_blank">16</a>]</cite> along with the very efficient FAST feature detector <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref" target="_blank">17</a>]</cite>. This reduced in more than one order of magnitude
the time needed for feature extraction, compared to SURF <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref" target="_blank">18</a>]</cite> and SIFT <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref" target="_blank">19</a>]</cite> features that were used in bags of words approaches so far.
Although the system demonstrated to be very efficient and robust, the use of BRIEF, neither rotation nor scale invariant, limited the system
to in-plane trajectories and loop detection from similar viewpoints. In our previous work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref" target="_blank">11</a>]</cite>, we proposed a bag of words place recognizer
built on DBoW2 with ORB <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref" target="_blank">9</a>]</cite>. ORB are binary features invariant to rotation and scale (in a certain range), resulting in a very fast recognizer with
good invariance to viewpoint. We demonstrated the high recall and robustness of the recognizer
in four different datasets, requiring less than 39ms (including feature extraction) to retrieve a loop candidate from a 10K image database.
In this work we use an improved version of that place recognizer, using covisibility information and
returning several hypotheses when querying the database instead of just the best match.</p>
</div>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Ii-B </span><span class="ltx_text ltx_font_italic">Map Initialization</span>
</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p class="ltx_p">Monocular SLAM requires a procedure to create an initial map because depth cannot be recovered from a single image.
One way to solve the problem is to initially track a known structure <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref" target="_blank">20</a>]</cite>. In the context of filtering approaches, points can be initialized
with high uncertainty in depth using an inverse depth parametrization <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref" target="_blank">21</a>]</cite>, which hopefully will later converge to their real positions.
The recent semi-dense work of Engel et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref" target="_blank">10</a>]</cite>, follows a similar approach initializing the depth of the pixels to a random value with high variance.</p>
</div>
<div id="S2.SS2.p2" class="ltx_para">
<p class="ltx_p">Initialization methods from two views either assumes locally scene planarity <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref" target="_blank">4</a>, <a href="#bib.bib22" title="" class="ltx_ref" target="_blank">22</a>]</cite> and
recover the relative camera pose from a homography using the method of Faugeras et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref" target="_blank">23</a>]</cite>, or compute an essential matrix <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib24" title="" class="ltx_ref" target="_blank">24</a>, <a href="#bib.bib25" title="" class="ltx_ref" target="_blank">25</a>]</cite> that
models planar and general scenes, using the five-point algorithm of Nister <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref" target="_blank">26</a>]</cite>, which requires to deal with multiple solutions.
Both reconstruction methods are not well constrained under low parallax and suffer from a twofold ambiguity solution if all points of a planar scene are
closer to one of the camera centers <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref" target="_blank">27</a>]</cite>. On the other hand if a non-planar scene is seen with parallax a unique fundamental matrix can be computed with the eight-point algorithm <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref" target="_blank">2</a>]</cite>
and the relative camera pose can be recovered without ambiguity.</p>
</div>
<div id="S2.SS2.p3" class="ltx_para">
<p class="ltx_p">We present in Section <a href="#S4" title="IV Automatic Map Initialization ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">IV</span></a> a new automatic approach based on model selection between a homography for planar scenes and a fundamental matrix for non-planar scenes.
A statistical approach to model selection was proposed by Torr et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib28" title="" class="ltx_ref" target="_blank">28</a>]</cite>.
Under a similar rationale we have developed a heuristic initialization algorithm that takes into account the risk of selecting a fundamental matrix
in close to degenerate cases (i.e. planar, nearly planar, and low parallax), favoring the selection of the homography.
In the planar case, for the sake of safe operation,
we refrain from initializing if the solution has a twofold ambiguity, as a corrupted solution could be selected.
We delay the initialization until the method produces a unique solution with significant parallax.</p>
</div>
</section>
<section id="S2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Ii-C </span><span class="ltx_text ltx_font_italic">Monocular SLAM</span>
</h3>

<div id="S2.SS3.p1" class="ltx_para">
<p class="ltx_p">Monocular SLAM was initially solved by filtering <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref" target="_blank">20</a>, <a href="#bib.bib29" title="" class="ltx_ref" target="_blank">29</a>, <a href="#bib.bib30" title="" class="ltx_ref" target="_blank">30</a>, <a href="#bib.bib21" title="" class="ltx_ref" target="_blank">21</a>]</cite>. In that approach every frame is processed by the filter to jointly estimate the
map feature locations and the camera pose. It has the drawbacks of wasting computation in processing consecutive frames
with little new information and the accumulation of linearization errors.
On the other hand keyframe-based approaches <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref" target="_blank">3</a>, <a href="#bib.bib4" title="" class="ltx_ref" target="_blank">4</a>]</cite> estimate the map using only selected frames (keyframes) allowing to perform more costly but accurate
bundle adjustment optimizations, as mapping is not tied to frame-rate.
Strasdat et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib31" title="" class="ltx_ref" target="_blank">31</a>]</cite> demonstrated that keyframe-based techniques are more accurate than filtering for the same computational cost.</p>
</div>
<div id="S2.SS3.p2" class="ltx_para">
<p class="ltx_p">The most representative keyframe-based SLAM system is probably PTAM by Klein and Murray <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref" target="_blank">4</a>]</cite>.
It was the first work to introduce the idea of splitting camera tracking and mapping in parallel threads,
and demonstrated to be successful for real time augmented reality applications in small environments. The original version
was later improved with edge features, a rotation estimation step during tracking and a better relocalization method <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib32" title="" class="ltx_ref" target="_blank">32</a>]</cite>.
The map points of PTAM correspond to FAST corners matched by patch correlation. This makes the points only useful for tracking but not for
place recognition. In fact PTAM does not detect large loops, and the relocalization is based on the correlation
of low resolution thumbnails of the keyframes, yielding a low invariance to viewpoint.</p>
</div>
<div id="S2.SS3.p3" class="ltx_para">
<p class="ltx_p">Strasdat et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref" target="_blank">6</a>]</cite> presented a large scale monocular SLAM system with a front-end based on optical flow implemented on a GPU,
followed by FAST feature matching and <em class="ltx_emph ltx_font_italic">motion-only BA</em>, and a back-end based on sliding-window BA. Loop closures were solved with a
pose graph optimization with similarity constraints (7DoF), that was able to correct the scale drift appearing in monocular SLAM.
From this work we take the idea of loop closing with 7DoF pose graph optimization and apply it to the
<em class="ltx_emph ltx_font_italic">Essential Graph</em> defined in Section <a href="#S3.SS4" title="III-D Covisibility Graph and Essential Graph ‣ III System Overview ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">III-D</span></a>
</p>
</div>
<div id="S2.SS3.p4" class="ltx_para">
<p class="ltx_p">Strasdat et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref" target="_blank">7</a>]</cite> used the front-end of PTAM, but performed the tracking only in a local map retrieved from a covisibility graph.
They proposed a double window optimization back-end that continuously performs BA in the inner window, and pose graph in a limited-size outer window.
However, loop closing is only effective if the size of the outer window is large enough to include the whole loop. In our system we
take advantage of the excellent ideas of using a local map based on covisibility, and building the pose graph from the covisibility graph, but apply
them in a totally redesigned front-end and back-end. Another difference is that, instead of using specific features for loop detection (SURF),
we perform the place recognition on the same tracked and mapped features, obtaining robust frame-rate relocalization and loop detection.</p>
</div>
<div id="S2.SS3.p5" class="ltx_para">
<p class="ltx_p">Pirker et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref" target="_blank">33</a>]</cite> proposed CD-SLAM, a very complete system including loop closing, relocalization, large scale operation and efforts
to work on dynamic environments. However map initialization is not mentioned.
The lack of a public implementation does not allow us to perform a comparison of accuracy, robustness or large-scale capabilities.</p>
</div>
<div id="S2.SS3.p6" class="ltx_para">
<p class="ltx_p">The visual odometry of Song et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib34" title="" class="ltx_ref" target="_blank">34</a>]</cite> uses ORB features for tracking and a temporal sliding window BA back-end.
In comparison our system is more general as they do not have global relocalization, loop closing and do not reuse the map.
They are also using the known distance from the camera to the ground to limit monocular scale drift.</p>
</div>
<div id="S2.SS3.p7" class="ltx_para">
<p class="ltx_p">Lim et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib25" title="" class="ltx_ref" target="_blank">25</a>]</cite>, work published after we submitted our preliminary version of this work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref" target="_blank">12</a>]</cite>, use also the same
features for tracking, mapping and loop detection. However the choice of BRIEF limits the system to in-plane trajectories. Their system
only tracks points from the last keyframe so the map is not reused if revisited (similar to visual odometry) and has the problem of growing unbounded.
We compare qualitatively our results with this approach in section <a href="#S8.SS5" title="VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VIII-E</span></a>.</p>
</div>
<div id="S2.SS3.p8" class="ltx_para">
<p class="ltx_p">The recent work of Engel et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref" target="_blank">10</a>]</cite>, known as LSD-SLAM, is able to build large scale semi-dense maps, using direct methods (i.e. optimization
directly over image pixel intensities) instead
of bundle adjustment over features. Their results are very impressive as the system is able to operate in real time, without GPU acceleration,
building a semi-dense map, with more potential applications for robotics than the sparse output generated by feature-based SLAM.
Nevertheless they still need features for loop detection and their camera localization accuracy is significantly lower than in our system and PTAM, as
we show experimentally in Section <a href="#S8.SS2" title="VIII-B Localization Accuracy in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VIII-B</span></a>. This surprising result is discussed in Section <a href="#S9.SS2" title="IX-B Sparse/Feature-based vs. Dense/Direct Methods ‣ IX Conclusions and Discussion ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">IX-B</span></a>.</p>
</div>
<div id="S2.SS3.p9" class="ltx_para">
<p class="ltx_p">In a halfway between direct and feature-based methods is the semi-direct visual odometry SVO of Forster et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref" target="_blank">22</a>]</cite>.
Without requiring to extract features in every frame they are able to operate at high frame-rates obtaining impressive results
in quadracopters. However no loop detection is performed and the current implementation is mainly thought for downward looking cameras.</p>
</div>
<div id="S2.SS3.p10" class="ltx_para">
<p class="ltx_p">Finally we want to discuss about keyframe selection. All visual SLAM works in the literature agree that running BA with all the points and all the frames is not feasible.
The work of Strasdat et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib31" title="" class="ltx_ref" target="_blank">31</a>]</cite> showed that the most cost-effective approach is to keep as much points as possible,
while keeping only non-redundant keyframes. The PTAM approach was to insert keyframes very cautiously to avoid an excessive growth of the computational complexity.
This restrictive keyframe insertion policy makes the tracking fail in hard exploration conditions.
Our <em class="ltx_emph ltx_font_italic">survival of the fittest</em> strategy achieves unprecedented robustness in difficult scenarios by inserting keyframes as
quickly as possible, and removing later the redundant ones, to avoid the extra cost.</p>
</div>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">Iii </span><span class="ltx_text ltx_font_smallcaps">System Overview</span>
</h2>

<figure id="S3.F1" class="ltx_figure"><img src="https://media.arxiv-vanity.com/render-output/5535659/x1.png" id="S3.F1.g1" class="ltx_graphics ltx_centering" width="316" height="249" alt="ORB-SLAM system overview, showing all the steps performed by the tracking, local mapping and loop closing threads. The main components of the place&#10;recognition module and the map are also shown."/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Fig. 1: </span>ORB-SLAM system overview, showing all the steps performed by the tracking, local mapping and loop closing threads. The main components of the place
recognition module and the map are also shown.</figcaption>
</figure>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Iii-a </span><span class="ltx_text ltx_font_italic">Feature Choice</span>
</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p class="ltx_p">One of the main design ideas in our system is that the same features used by the mapping
and tracking are used for place recognition to perform frame-rate relocalization and loop detection. This makes our system efficient and avoids the need to interpolate
the depth of the recognition features from near SLAM features as in previous works <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref" target="_blank">6</a>, <a href="#bib.bib7" title="" class="ltx_ref" target="_blank">7</a>]</cite>.
We requiere features that need for extraction much less than 33ms per image,
which excludes the popular SIFT (<span id="S3.SS1.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\sim 300\textrm{ms}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">∼</span></span><span class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">300</span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1em;">ms</span></span></span></span></span></span></span></span></span></span>) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref" target="_blank">19</a>]</cite>, SURF (<span id="S3.SS1.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\sim 300\textrm{ms}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">∼</span></span><span class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">300</span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1em;">ms</span></span></span></span></span></span></span></span></span></span>) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref" target="_blank">18</a>]</cite> or the recent A-KAZE (<span id="S3.SS1.p1.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\sim 100\textrm{ms}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">∼</span></span><span class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">100</span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1em;">ms</span></span></span></span></span></span></span></span></span></span>) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib35" title="" class="ltx_ref" target="_blank">35</a>]</cite>.
To obtain general place recognition capabilities, we require rotation invariance, which excludes BRIEF <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref" target="_blank">16</a>]</cite> and LDB <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref" target="_blank">36</a>]</cite>.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p class="ltx_p">We chose ORB <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref" target="_blank">9</a>]</cite>, which are oriented multi-scale FAST corners with a
256 bits descriptor associated. They are extremely fast to compute and match,
while they have good invariance to viewpoint. This allows to match them from wide baselines, boosting the accuracy of BA.
We already shown the good performance of ORB for place recognition in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref" target="_blank">11</a>]</cite>.
While our current implementation make use of ORB, the techniques proposed are not restricted to these features.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Iii-B </span><span class="ltx_text ltx_font_italic">Three Threads: Tracking, Local Mapping and Loop Closing</span>
</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p class="ltx_p">Our system, see an overview in Fig. <a href="#S3.F1" title="Fig. 1 ‣ III System Overview ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">1</span></a>, incorporates three threads that run in parallel: tracking, local mapping and loop closing.
The tracking is in charge of localizing the camera with every frame and deciding when to insert a new keyframe.
We perform first an initial feature matching with the previous frame and optimize the pose using <em class="ltx_emph ltx_font_italic">motion-only BA</em>.
If the tracking is lost (e.g. due to occlusions or abrupt movements), the place recognition module is used to perform a global
relocalization. Once there is
an initial estimation of the camera pose and feature matchings, a local visible map is retrieved using the covisibility graph of keyframes that is maintained by the system, see
Fig. <a href="#S3.F2.sf1" title="(a) ‣ Fig. 2 ‣ III-C Map Points, KeyFrames and their Selection ‣ III System Overview ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">2(a)</span></a> and Fig. <a href="#S3.F2.sf2" title="(b) ‣ Fig. 2 ‣ III-C Map Points, KeyFrames and their Selection ‣ III System Overview ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">2(b)</span></a>.
Then matches with the local map points are searched by reprojection, and camera pose is optimized again with all matches. Finally the tracking thread
decides if a new keyframe is inserted. All the tracking steps are explained in detail in Section <a href="#S5" title="V Tracking ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">V</span></a>.
The novel procedure to create an initial map is presented in Section <a href="#S4" title="IV Automatic Map Initialization ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">IV</span></a>.</p>
</div>
<div id="S3.SS2.p2" class="ltx_para">
<p class="ltx_p">The local mapping processes new keyframes and performs <em class="ltx_emph ltx_font_italic">local BA</em> to achieve an optimal reconstruction
in the surroundings of the camera pose. New correspondences for unmatched ORB in the new keyframe are searched in connected keyframes
in the covisibility graph to triangulate new points. Some time after creation, based on the information gathered during the tracking, an exigent point culling
policy is applied in order to retain only high quality points. The local mapping is also in charge of culling redundant keyframes.
We explain in detail all local mapping steps in Section <a href="#S6" title="VI Local Mapping ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VI</span></a>.</p>
</div>
<div id="S3.SS2.p3" class="ltx_para">
<p class="ltx_p">The loop closing searches for loops with every new keyframe. If a loop is detected, we compute a similarity transformation that informs about the drift
accumulated in the loop. Then both sides of the loop are aligned and duplicated points are fused. Finally a pose graph optimization over similarity constraints <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref" target="_blank">6</a>]</cite>
is performed to achieve global consistency. The main novelty is that we perform the optimization over the <em class="ltx_emph ltx_font_italic">Essential Graph</em>, a sparser subgraph of the covisibility graph which is explained
in Section <a href="#S3.SS4" title="III-D Covisibility Graph and Essential Graph ‣ III System Overview ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">III-D</span></a>. The loop detection and correction steps are explained in detail in Section <a href="#S7" title="VII Loop Closing ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VII</span></a>.</p>
</div>
<div id="S3.SS2.p4" class="ltx_para">
<p class="ltx_p">We use the Levenberg-Marquardt algorithm implemented in g2o <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib37" title="" class="ltx_ref" target="_blank">37</a>]</cite> to carry out all optimizations. In the Appendix we describe the error terms, cost functions,
and variables involved in each optimization.</p>
</div>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Iii-C </span><span class="ltx_text ltx_font_italic">Map Points, KeyFrames and their Selection</span>
</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p class="ltx_p">Each map point <span id="S3.SS3.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="p_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> stores:</p>
<ul id="S3.I1" class="ltx_itemize">
<li id="S3.I1.i1" class="ltx_item">
<div id="S3.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Its 3D position <span id="S3.I1.i1.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\textbf{X}_{w,i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">X</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> in the world coordinate system.</p>
</div>
</li>
<li id="S3.I1.i2" class="ltx_item">
<div id="S3.I1.i2.p1" class="ltx_para">
<p class="ltx_p">The viewing direction <span id="S3.I1.i2.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\textbf{n}_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">n</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span>, which is the mean unit vector of all its viewing directions (the rays that join the point with the optical center of the keyframes
that observe it).</p>
</div>
</li>
<li id="S3.I1.i3" class="ltx_item">
<div id="S3.I1.i3.p1" class="ltx_para">
<p class="ltx_p">A representative ORB descriptor <span id="S3.I1.i3.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\textbf{D}_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">D</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span>, which is the associated ORB descriptor whose hamming distance is minimum with
respect to all other associated descriptors in the keyframes in which the point is observed.</p>
</div>
</li>
<li id="S3.I1.i4" class="ltx_item">
<div id="S3.I1.i4.p1" class="ltx_para">
<p class="ltx_p">The maximum <span id="S3.I1.i4.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="d_{\mathrm{max}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">m</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">a</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">x</span></span></span></span></span></span></span></span></span></span></span></span></span> and minimum <span id="S3.I1.i4.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="d_{\mathrm{min}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">m</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">n</span></span></span></span></span></span></span></span></span></span></span></span></span> distances at which the point can be observed,
according to the scale invariance limits of the ORB features.
</p>
</div>
</li>
</ul>
</div>
<div id="S3.SS3.p2" class="ltx_para">
<p class="ltx_p">Each keyframe <span id="S3.SS3.p2.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> stores:</p>
<ul id="S3.I2" class="ltx_itemize">
<li id="S3.I2.i1" class="ltx_item">
<div id="S3.I2.i1.p1" class="ltx_para">
<p class="ltx_p">The camera pose <span id="S3.I2.i1.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\textbf{T}_{iw}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">T</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span></span></span></span></span></span></span></span></span></span>, which is a rigid body transformation that transforms points from the world to the camera coordinate system.</p>
</div>
</li>
<li id="S3.I2.i2" class="ltx_item">
<div id="S3.I2.i2.p1" class="ltx_para">
<p class="ltx_p">The camera intrinsics, including focal length and principal point.</p>
</div>
</li>
<li id="S3.I2.i3" class="ltx_item">
<div id="S3.I2.i3.p1" class="ltx_para">
<p class="ltx_p">All the ORB features extracted in the frame, associated or not to a map point, whose coordinates are undistorted if a distortion model is provided.</p>
</div>
</li>
</ul>
</div>
<div id="S3.SS3.p3" class="ltx_para">
<p class="ltx_p">Map points and keyframes are created with a generous policy, while a later very exigent culling mechanism
is in charge of detecting redundant keyframes and wrongly matched or not trackable map points. This permits a flexible map expansion during exploration, which boost tracking
robustness under hard conditions (e.g. rotations, fast movements),
while its size is bounded in continual revisits to the same environment, i.e. lifelong operation. Additionally our maps contain very few outliers
compared with PTAM, at the expense of containing less points. Culling procedures of map points and keyframes are
explained in Sections <a href="#S6.SS2" title="VI-B Recent Map Points Culling ‣ VI Local Mapping ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VI-B</span></a> and <a href="#S6.SS5" title="VI-E Local Keyframe Culling ‣ VI Local Mapping ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VI-E</span></a> respectively.</p>
</div>
<figure id="S3.F2" class="ltx_figure">
<table style="width:100%;">
<tbody><tr>
<td class="ltx_subfigure">
<figure id="S3.F2.sf1" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x2.png" id="S3.F2.sf1.g1" class="ltx_graphics" width="149" height="134" alt="Reconstruction and graphs in the sequence "/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(a)</span> </span><span class="ltx_text" style="font-size:80%;">KeyFrames (blue), Current Camera (green), MapPoints (black, red), Current Local MapPoints (red)</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S3.F2.sf2" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x3.png" id="S3.F2.sf2.g1" class="ltx_graphics" width="148" height="132" alt="Reconstruction and graphs in the sequence "/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(b)</span> </span><span class="ltx_text" style="font-size:80%;">Covisibility Graph</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S3.F2.sf3" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x4.png" id="S3.F2.sf3.g1" class="ltx_graphics" width="147" height="132" alt="Reconstruction and graphs in the sequence "/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(c)</span> </span><span class="ltx_text" style="font-size:80%;">Spanning Tree (green) and Loop Closure (red)</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S3.F2.sf4" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x5.png" id="S3.F2.sf4.g1" class="ltx_graphics" width="148" height="132" alt="Reconstruction and graphs in the sequence "/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(d)</span> </span><span class="ltx_text" style="font-size:80%;">Essential Graph</span></figcaption>
</figure>
</td>
</tr>
</tbody></table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Fig. 2: </span>Reconstruction and graphs in the sequence <em class="ltx_emph ltx_font_italic">fr3_long_office_household</em> from the TUM RGB-D Benchmark <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref" target="_blank">38</a>]</cite>.</figcaption>
</figure>
</section>
<section id="S3.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Iii-D </span><span class="ltx_text ltx_font_italic">Covisibility Graph and Essential Graph</span>
</h3>

<div id="S3.SS4.p1" class="ltx_para">
<p class="ltx_p">Covisibility information between keyframes is very useful in several tasks of our system, and is represented as an undirected weighted graph as in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref" target="_blank">7</a>]</cite>.
Each node is a keyframe and an edge between two keyframes
exists if they share observations of the same map points (at least 15), being the weight <span id="S3.SS4.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\theta"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">θ</span></span></span></span></span></span></span> of the edge the number of common map points.</p>
</div>
<div id="S3.SS4.p2" class="ltx_para">
<p class="ltx_p">In order to correct a loop we perform a pose graph optimization <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref" target="_blank">6</a>]</cite> that distributes the loop closing error along the graph. In order not to include
all the edges provided by the covisibility graph, which can be very dense, we propose to build an <em class="ltx_emph ltx_font_italic">Essential Graph</em> that retains
all the nodes (keyframes), but less edges, still preserving a strong network that yields accurate results. The system builds incrementally a
spanning tree from the initial keyframe, which provides a connected subgraph of the covisibility graph with minimal number
of edges. When a new keyframe is inserted, it is included in the tree linked to the
keyframe which shares most point observations, and when a keyframe is erased by the culling policy, the system updates the links
affected by that keyframe. The <em class="ltx_emph ltx_font_italic">Essential Graph</em> contains the spanning tree, the subset of edges from the covisibility graph
with high covisibility (<span id="S3.SS4.p2.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\theta_{\mathrm{min}}=100"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">θ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">m</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">n</span></span></span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">100</span></span></span></span></span></span></span>), and the loop closure edges, resulting in a strong network of cameras.
Fig. <a href="#S3.F2" title="Fig. 2 ‣ III-C Map Points, KeyFrames and their Selection ‣ III System Overview ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">2</span></a> shows an example of a covisibility graph, spanning tree and associated essential graph.
As shown in the experiments of Section <a href="#S8.SS5" title="VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VIII-E</span></a>, when performing the pose graph optimization, the
solution is so accurate that an additional full bundle adjustment optimization barely improves the solution.
The efficiency of the essential graph and the influence of the <span id="S3.SS4.p2.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\theta_{\mathrm{min}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">θ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">m</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">n</span></span></span></span></span></span></span></span></span></span></span></span></span> is shown at the end of Section <a href="#S8.SS5" title="VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VIII-E</span></a>.</p>
</div>
</section>
<section id="S3.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Iii-E </span><span class="ltx_text ltx_font_italic">Bags of Words Place Recognition</span>
</h3>

<div id="S3.SS5.p1" class="ltx_para">
<p class="ltx_p">The system has embedded a bags of words place recognition module, based on DBoW2<span id="footnote2" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span><a href="https://github.com/dorian3d/DBoW2" title="" class="ltx_ref ltx_url ltx_font_typewriter" target="_blank">https://github.com/dorian3d/DBoW2</a></span></span></span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref" target="_blank">5</a>]</cite>, to perform loop detection and relocalization.
Visual words are just a discretization of the descriptor space, which is known as the visual vocabulary.
The vocabulary is created offline with the ORB descriptors extracted from a large set of images.
If the images are general enough, the same vocabulary can be used for different environments getting a good performance, as shown
in our previous work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref" target="_blank">11</a>]</cite>. The system builds incrementally a database that contains an invert index, which stores for each visual word in the vocabulary,
in which keyframes it has been seen, so that querying the database can be done very efficiently.
The database is also updated when a keyframe is deleted by the culling procedure.</p>
</div>
<div id="S3.SS5.p2" class="ltx_para">
<p class="ltx_p">Because there exists visual overlap between keyframes, when querying the database there will not exist a unique keyframe with a high score.
The original DBoW2 took this overlapping into account, adding up the score of images that are close
in time. This has the limitation of not including keyframes viewing the same place but inserted at a different time.
Instead we group those keyframes that are connected in the covisibility graph.
In addition our database returns all keyframe matches whose scores are higher than the <span id="S3.SS5.p2.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="75\%"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">75</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">%</span></span></span></span></span></span></span> of the best score.</p>
</div>
<div id="S3.SS5.p3" class="ltx_para">
<p class="ltx_p">An additional benefit of the bags of words representation for feature matching was reported in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref" target="_blank">5</a>]</cite>. When we want
to compute the correspondences between two sets of ORB features, we can constraint the brute force matching only to those features
that belong to the same node in the vocabulary tree at a certain level (we select the second out of six), speeding up the search.
We use this <em class="ltx_emph ltx_font_italic">trick</em> when searching matches
for triangulating new points, and at loop detection and relocalization. We also
refine the correspondences with an orientation consistency test, see <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref" target="_blank">11</a>]</cite> for details, that discards outliers ensuring a coherent rotation for all correspondences.</p>
</div>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">Iv </span><span class="ltx_text ltx_font_smallcaps">Automatic Map Initialization</span>
</h2>

<div id="S4.p1" class="ltx_para">
<p class="ltx_p">The goal of the map initialization is to compute the relative pose between two frames to triangulate an initial set of map points.
This method should be independent of the scene (planar or general) and
should not require human intervention to select a good two-view configuration, i.e. a configuration with significant parallax.
We propose to compute in parallel two geometrical models, a homography assuming a planar scene and a fundamental matrix assuming
a non-planar scene. We then use a heuristic to select a model and try to recover the relative pose with a specific method for the selected model.
Our method only initializes when it is certain that the two-view configuration is safe, detecting low-parallax cases and the well-known twofold
planar ambiguity <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref" target="_blank">27</a>]</cite>, avoiding to initialize a corrupted map. The steps of our algorithm are:</p>
</div>
<div id="S4.p2" class="ltx_para">
<ol id="S4.I1" class="ltx_enumerate">
<li id="S4.I1.i1" class="ltx_item">
<div id="S4.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Find initial correspondences:</p>
</div>
<div id="S4.I1.i1.p2" class="ltx_para">
<p class="ltx_p">Extract ORB features (only at the finest scale) in the current frame <span id="S4.I1.i1.p2.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="F_{c}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.106em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.106em;">F</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span></span></span></span></span></span> and search for matches <span id="S4.I1.i1.p2.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\textbf{x}_{c}\leftrightarrow\textbf{x}_{r}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">x</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">↔</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">x</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span></span></span></span></span></span> in the reference frame <span id="S4.I1.i1.p2.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="F_{r}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.106em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.106em;">F</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span></span></span></span></span></span>.
If not enough matches are found, reset the reference frame.</p>
</div>
</li>
<li id="S4.I1.i2" class="ltx_item">
<div id="S4.I1.i2.p1" class="ltx_para">
<p class="ltx_p">Parallel computation of the two models:</p>
</div>
<div id="S4.I1.i2.p2" class="ltx_para">
<p class="ltx_p">Compute in parallel threads a homography <span id="S4.I1.i2.p2.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\textbf{H}_{cr}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">H</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span></span></span></span></span></span> and a fundamental matrix <span id="S4.I1.i2.p2.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\textbf{F}_{cr}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">F</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span></span></span></span></span></span>:</p>
<div class="ltx_engrafo_equation_container"><table id="S4.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="S4.E1.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"><span class="mjx-chtml MJXc-display" style="text-align: left;"><span class="mjx-math" aria-label=" \textbf{x}_{c}=\textbf{H}_{cr}\,\textbf{x}_{r}\qquad\qquad\textbf{x}_{c}^{T}\,%&#10;\textbf{F}_{cr}\,\textbf{x}_{r}=0 "><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">x</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">H</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span><span class="mjx-mspace" style="width: 0.167em; height: 0px;"/><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">x</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span><span class="mjx-mspace" style="width: 2em; height: 0px;"/><span class="mjx-mspace" style="width: 2em; height: 0px;"/><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">x</span></span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.26em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.657em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span></span><span class="mjx-mspace" style="width: 0.167em; height: 0px;"/><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">F</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span><span class="mjx-mspace" style="width: 0.167em; height: 0px;"/><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">x</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr>
</tbody></table></div>
<p class="ltx_p">with the normalized DLT and 8-point algorithms respectively as explained in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref" target="_blank">2</a>]</cite>
inside a RANSAC scheme. To make homogeneous the procedure for both models, the number of iterations is prefixed and the same for both models, along with the points to be used at each iteration,
8 for the fundamental matrix, and 4 of them for the homography.
At each iteration we compute a score <span id="S4.I1.i2.p2.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="S_{M}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span></span></span></span></span></span></span></span></span></span> for each model <span id="S4.I1.i2.p2.m4" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="M"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span></span></span></span></span></span> (<span id="S4.I1.i2.p2.m5" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="H"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.057em;">H</span></span></span></span></span></span></span> for the homography, <span id="S4.I1.i2.p2.m6" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="F"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.106em;">F</span></span></span></span></span></span></span> for the fundamental matrix):</p>
<div class="ltx_engrafo_equation_container"><table id="S4.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="S4.E2.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"><span class="mjx-chtml MJXc-display" style="text-align: left;"><span class="mjx-math" aria-label=" \begin{gathered}\displaystyle S_{M}=\sum_{i}\big{(}\rho_{M}\big{(}d_{cr}^{2}(%&#10;\textbf{x}_{c}^{i},\textbf{x}_{r}^{i},M)\big{)}+\rho_{M}(d_{rc}^{2}\big{(}%&#10;\textbf{x}_{c}^{i},\textbf{x}_{r}^{i},M)\big{)}\big{)}\\&#10;\displaystyle\rho_{M}(d^{2})=\begin{cases}\Gamma-d^{2}&amp;\textrm{if}\quad d^{2}&lt;%&#10;T_{M}\\&#10;0&amp;\textrm{if}\quad d^{2}\geq T_{M}\end{cases}\end{gathered} "><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mtable" style="vertical-align: -2.269em; padding: 0px 0.167em;"><span class="mjx-table"><span class="mjx-mtr" style="height: 2.439em;"><span class="mjx-mtd" style="padding: 0px 0px 0px 0px; width: 21.809em;"><span class="mjx-mrow"><span class="mjx-mstyle"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-munderover MJXc-space3"><span class="mjx-itable"><span class="mjx-row"><span class="mjx-cell"><span class="mjx-op"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size2-R" style="padding-top: 0.74em; padding-bottom: 0.74em;">∑</span></span></span></span></span><span class="mjx-row"><span class="mjx-under" style="font-size: 70.7%; padding-top: 0.236em; padding-bottom: 0.141em; padding-left: 0.849em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span><span class="mjx-mstyle MJXc-space1"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size1-R" style="padding-top: 0.593em; padding-bottom: 0.593em;">(</span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.519em;">ρ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span></span></span></span></span><span class="mjx-mstyle"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size1-R" style="padding-top: 0.593em; padding-bottom: 0.593em;">(</span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-stack" style="vertical-align: -0.157em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0.076em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">x</span></span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.26em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.646em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">x</span></span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.26em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.646em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span><span class="mjx-mstyle"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size1-R" style="padding-top: 0.593em; padding-bottom: 0.593em;">)</span></span></span></span></span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">+</span></span><span class="mjx-msubsup MJXc-space2"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.519em;">ρ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-stack" style="vertical-align: -0.157em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0.076em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span></span><span class="mjx-mstyle"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size1-R" style="padding-top: 0.593em; padding-bottom: 0.593em;">(</span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">x</span></span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.26em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.646em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">x</span></span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.26em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.646em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span><span class="mjx-mstyle"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size1-R" style="padding-top: 0.593em; padding-bottom: 0.593em;">)</span></span></span></span></span></span><span class="mjx-mstyle"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size1-R" style="padding-top: 0.593em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span></span><span class="mjx-strut"/></span></span></span><span class="mjx-mtr" style="height: 2.599em;"><span class="mjx-mtd" style="padding: 0.15em 0px 0px 0px;"><span class="mjx-mrow"><span class="mjx-mstyle"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.519em;">ρ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.584em; padding-left: 0.076em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-mrow MJXc-space3"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size3-R" style="padding-top: 1.256em; padding-bottom: 1.256em;">{</span></span><span class="mjx-mtable" style="vertical-align: -0.927em; padding: 0px 0.167em;"><span class="mjx-table"><span class="mjx-mtr" style="height: 1.177em;"><span class="mjx-mtd" style="padding: 0px 0.5em 0px 0px; text-align: left; width: 2.81em;"><span class="mjx-mrow" style="margin-top: -0.148em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">Γ</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-msubsup MJXc-space2"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0.076em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span><span class="mjx-strut"/></span></span><span class="mjx-mtd" style="padding: 0px 0px 0px 0.5em; text-align: left; width: 5.659em;"><span class="mjx-mrow" style="margin-top: -0.148em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1em;">if</span></span></span></span></span><span class="mjx-mspace" style="width: 1em; height: 0px;"/><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0.076em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">&lt;</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base" style="margin-right: -0.12em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span></span></span></span></span><span class="mjx-strut"/></span></span></span><span class="mjx-mtr" style="height: 1.177em;"><span class="mjx-mtd" style="padding: 0.1em 0.5em 0px 0px; text-align: left;"><span class="mjx-mrow" style="margin-top: -0.148em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span><span class="mjx-strut"/></span></span><span class="mjx-mtd" style="padding: 0.1em 0px 0px 0.5em; text-align: left;"><span class="mjx-mrow" style="margin-top: -0.148em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1em;">if</span></span></span></span></span><span class="mjx-mspace" style="width: 1em; height: 0px;"/><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0.076em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≥</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base" style="margin-right: -0.12em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span></span></span></span></span><span class="mjx-strut"/></span></span></span></span></span><span class="mjx-mo" style="width: 0.12em;"/></span></span></span><span class="mjx-strut"/></span></span></span></span></span></span></span></span></span></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr>
</tbody></table></div>
</div>
<div id="S4.I1.i2.p3" class="ltx_para">
<p class="ltx_p">where <span id="S4.I1.i2.p3.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="d_{cr}^{2}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-stack" style="vertical-align: -0.157em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0.076em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span></span></span></span></span></span></span></span></span></span></span> and <span id="S4.I1.i2.p3.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="d_{rc}^{2}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-stack" style="vertical-align: -0.157em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0.076em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span></span></span></span></span></span></span> are the symmetric transfer errors <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref" target="_blank">2</a>]</cite> from one frame to the other. <span id="S4.I1.i2.p3.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="T_{M}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.12em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.081em;">M</span></span></span></span></span></span></span></span></span></span></span> is the outlier rejection threshold based on the <span id="S4.I1.i2.p3.m4" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="{\chi}^{2}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.519em;">χ</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span></span></span></span> test at 95%
(<span id="S4.I1.i2.p3.m5" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="T_{H}=5.99"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.12em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.057em;">H</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">5.99</span></span></span></span></span></span></span>, <span id="S4.I1.i2.p3.m6" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="T_{F}=3.84"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.12em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.106em;">F</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">3.84</span></span></span></span></span></span></span>, assuming a standard deviation of 1 pixel in the measurement error). <span id="S4.I1.i2.p3.m7" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\Gamma"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">Γ</span></span></span></span></span></span></span> is defined equal to <span id="S4.I1.i2.p3.m8" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="T_{H}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.12em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.057em;">H</span></span></span></span></span></span></span></span></span></span></span> so that both models score equally for
the same <span id="S4.I1.i2.p3.m9" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="d"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span></span></span></span></span> in their inlier region, again to make the process homogeneous.</p>
</div>
<div id="S4.I1.i2.p4" class="ltx_para">
<p class="ltx_p">We keep the homography and fundamental matrix with highest score. If no model could be found (not enough inliers), we restart the process again from step 1.</p>
</div>
</li>
<li id="S4.I1.i3" class="ltx_item">
<div id="S4.I1.i3.p1" class="ltx_para">
<p class="ltx_p">Model selection:</p>
</div>
<div id="S4.I1.i3.p2" class="ltx_para">
<p class="ltx_p">If the scene is planar, nearly planar or there is low parallax, it can be explained by a homography. However a fundamental matrix can also be found, but the problem
is not well constrained <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref" target="_blank">2</a>]</cite> and any attempt to recover the motion from the fundamental matrix would yield wrong results. We should select the homography
as the reconstruction method will correctly initialize from a plane or it will detect the low parallax case and refuse the initialization.
On the other hand a non-planar scene with enough parallax can only be explained by the fundamental matrix, but a homography can also be found explaining a subset
of the matches if they lie on a plane or they have low parallax (they are far away). In this case we should select the fundamental matrix.
We have found that a robust heuristic is to compute:</p>
<div class="ltx_engrafo_equation_container"><table id="S4.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="S4.E3.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"><span class="mjx-chtml MJXc-display" style="text-align: left;"><span class="mjx-math" aria-label=" R_{H}=\frac{S_{H}}{S_{H}+S_{F}} "><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">R</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.057em;">H</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-mfrac MJXc-space3"><span class="mjx-box MJXc-stacked" style="width: 3.877em; padding: 0px 0.12em;"><span class="mjx-numerator" style="width: 3.877em; top: -1.438em;"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.057em;">H</span></span></span></span></span></span></span><span class="mjx-denominator" style="width: 3.877em; bottom: -0.938em;"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.057em;">H</span></span></span></span></span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">+</span></span><span class="mjx-msubsup MJXc-space2"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.106em;">F</span></span></span></span></span></span></span></span><span style="border-bottom: 1.3px solid; top: -0.296em; width: 3.877em;" class="mjx-line"/></span><span style="height: 2.376em; vertical-align: -0.938em;" class="mjx-vsize"/></span></span></span></span></span></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr>
</tbody></table></div>
<p class="ltx_p">and select the homography if <span id="S4.I1.i3.p2.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="R_{H}&gt;0.45"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">R</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.057em;">H</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">&gt;</span></span><span class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0.45</span></span></span></span></span></span></span>, which adequately captures the planar and low parallax cases. Otherwise, we select the fundamental matrix.</p>
</div>
</li>
<li id="S4.I1.i4" class="ltx_item">
<div id="S4.I1.i4.p1" class="ltx_para">
<p class="ltx_p">Motion and Structure from Motion recovery:</p>
</div>
<div id="S4.I1.i4.p2" class="ltx_para">
<p class="ltx_p">Once a model is selected we retrieve the motion hypotheses associated. In the case of the homography we retrieve 8 motion hypotheses using
the method of Faugeras et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref" target="_blank">23</a>]</cite>. The method proposes cheriality tests to select the valid solution. However
these tests fail if there is low parallax as points easily go in front or back of the cameras, which could yield the selection of a wrong solution.
We propose to directly triangulate the eight solutions, and check if there is one solution
with most points seen with parallax, in front of both cameras and with low reprojection error. If there is not a clear winner solution, we do not initialize and continue
from step 1. This technique to disambiguate the solutions makes our initialization robust under low parallax and the twofold ambiguity configuration,
and could be considered the key of the robustness of our method.</p>
</div>
<div id="S4.I1.i4.p3" class="ltx_para">
<p class="ltx_p">In the case of the fundamental matrix, we convert it in an essential matrix using the calibration matrix <span id="S4.I1.i4.p3.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{K}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">K</span></span></span></span></span></span></span></span></span>:</p>
<div class="ltx_engrafo_equation_container"><table id="S4.E4" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="S4.E4.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"><span class="mjx-chtml MJXc-display" style="text-align: left;"><span class="mjx-math" aria-label=" \textbf{E}_{rc}=\textbf{K}^{T}\,\textbf{F}_{rc}\,\textbf{K} "><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">E</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">K</span></span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.781em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span></span></span></span><span class="mjx-mspace" style="width: 0.167em; height: 0px;"/><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">F</span></span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.368em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">r</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span><span class="mjx-mspace" style="width: 0.167em; height: 0px;"/><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; font-weight: bold; padding-bottom: 0.3em; width: 0.5em;">K</span></span></span></span></span></span></span></span></span></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr>
</tbody></table></div>
</div>
<div id="S4.I1.i4.p4" class="ltx_para">
<p class="ltx_p">and then retrieve 4 motion hypotheses with the singular value decomposition method explained in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref" target="_blank">2</a>]</cite>.
We triangulate the four solutions and select the reconstruction as done for the homography.</p>
</div>
</li>
<li id="S4.I1.i5" class="ltx_item">
<div id="S4.I1.i5.p1" class="ltx_para">
<p class="ltx_p">Bundle adjustment:</p>
</div>
<div id="S4.I1.i5.p2" class="ltx_para">
<p class="ltx_p">Finally we perform a <em class="ltx_emph ltx_font_italic">full BA</em>, see the Appendix for details,
to refine the initial reconstruction.</p>
</div>
</li>
</ol>
</div>
<div id="S4.p3" class="ltx_para">
<p class="ltx_p">An example of a challenging initialization in the outdoor NewCollege robot sequence <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib39" title="" class="ltx_ref" target="_blank">39</a>]</cite> is shown in Fig. <a href="#S5.F3" title="Fig. 3 ‣ V-A ORB Extraction ‣ V Tracking ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">3</span></a>.
It can be seen how PTAM and LSD-SLAM have initialized all points in a plane, while our method has waited until there is enough parallax,
initializing correctly from the fundamental matrix.</p>
</div>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">V </span><span class="ltx_text ltx_font_smallcaps">Tracking</span>
</h2>

<div id="S5.p1" class="ltx_para">
<p class="ltx_p">In this section we describe the steps of the tracking thread that are performed with every frame from the camera.
The camera pose optimizations, mentioned in several steps, consist in <em class="ltx_emph ltx_font_italic">motion-only BA</em>, which is described in the Appendix.
</p>
</div>
<section id="S5.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">V-a </span><span class="ltx_text ltx_font_italic">ORB Extraction</span>
</h3>

<div id="S5.SS1.p1" class="ltx_para">
<p class="ltx_p">We extract FAST corners at 8 scale levels with a scale factor of 1.2.
For image resolutions from <span id="S5.SS1.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="512\times 384"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">512</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">384</span></span></span></span></span></span></span> to <span id="S5.SS1.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="752\times 480"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">752</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">480</span></span></span></span></span></span></span> pixels we found suitable to extract 1000 corners, for higher
resolutions, as the <span id="S5.SS1.p1.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="1241\times 376"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1241</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">376</span></span></span></span></span></span></span> in the KITTI dataset <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib40" title="" class="ltx_ref" target="_blank">40</a>]</cite> we extract 2000 corners.
In order to ensure an homogeneous distribution we divide each scale level in a grid, trying to extract at least 5 corners per cell.
Then we detect corners in each cell, adapting
the detector threshold if not enough corners are found. The amount of corners retained per cell is also adapted if some cells contains no corners (textureless
or low contrast). The orientation and ORB descriptor are then computed on the retained FAST corners.
The ORB descriptor is used in all feature matching, in contrast to the search by patch correlation in PTAM.</p>
</div>
<figure id="S5.F3" class="ltx_figure"><img src="https://media.arxiv-vanity.com/render-output/5535659/x6.png" id="S5.F3.g1" class="ltx_graphics ltx_centering" width="326" height="374" alt="Top: PTAM, middle LSD-SLAM, bottom: ORB-SLAM, some time after initialization in the NewCollege sequence "/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Fig. 3: </span>Top: PTAM, middle LSD-SLAM, bottom: ORB-SLAM, some time after initialization in the NewCollege sequence <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib39" title="" class="ltx_ref" target="_blank">39</a>]</cite>.
PTAM and LSD-SLAM initialize a corrupted planar solution while our method has automatically initialized from the fundamental matrix
when it has detected enough parallax. Depending on which keyframes are manually selected, PTAM is also able to initialize well. </figcaption>
</figure>
</section>
<section id="S5.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">V-B </span><span class="ltx_text ltx_font_italic">Initial Pose Estimation from Previous Frame</span>
</h3>

<div id="S5.SS2.p1" class="ltx_para">
<p class="ltx_p">If tracking was successful for last frame, we use a constant velocity motion model to predict the camera pose and perform a guided search of the
map points observed in the last frame. If not enough matches were found (i.e. motion model is clearly violated), we use a wider search
of the map points around their position in the last frame.
The pose is then optimized with the found correspondences.</p>
</div>
</section>
<section id="S5.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">V-C </span><span class="ltx_text ltx_font_italic">Initial Pose Estimation via Global Relocalization</span>
</h3>

<div id="S5.SS3.p1" class="ltx_para">
<p class="ltx_p">If the tracking is lost, we convert the frame into bag of words and query the recognition database for keyframe candidates for global relocalization.
We compute correspondences with ORB associated to map points in each keyframe, as explained in section <a href="#S3.SS5" title="III-E Bags of Words Place Recognition ‣ III System Overview ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">III-E</span></a>.
We then perform alternatively RANSAC iterations for each keyframe and try
to find a camera pose using the PnP algorithm <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref" target="_blank">41</a>]</cite>.
If we find a camera pose with enough inliers, we optimize the pose and perform a guided search of more matches with the map points of the candidate keyframe.
Finally the camera pose is again optimized, and if supported with enough inliers, tracking procedure continues.
</p>
</div>
</section>
<section id="S5.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">V-D </span><span class="ltx_text ltx_font_italic">Track Local Map</span>
</h3>

<div id="S5.SS4.p1" class="ltx_para">
<p class="ltx_p">Once we have an estimation of the camera pose and an initial set of feature matches, we can project the map into the frame and search more map point correspondences.
To bound the complexity in large maps, we only project a local map.
This local map contains the set of keyframes <span id="S5.SS4.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathcal{K}_{1}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">K</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span></span>, that share map points with the current frame,
and a set <span id="S5.SS4.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathcal{K}_{2}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">K</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span></span></span></span> with neighbors to the keyframes <span id="S5.SS4.p1.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathcal{K}_{1}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">K</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span></span> in the covisibility graph.
The local map also has a reference keyframe <span id="S5.SS4.p1.m4" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{\mathrm{ref}}\in\mathcal{K}_{1}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.23em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">r</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em; padding-right: 0.066em;">f</span></span></span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">∈</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">K</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span></span> which shares most map points with current frame.
Now each map point seen in <span id="S5.SS4.p1.m5" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathcal{K}_{1}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">K</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span></span> and <span id="S5.SS4.p1.m6" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathcal{K}_{2}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">K</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span></span></span></span> is searched in the current frame as follows:</p>
</div>
<div id="S5.SS4.p2" class="ltx_para">
<ol id="S5.I1" class="ltx_enumerate">
<li id="S5.I1.i1" class="ltx_item">
<div id="S5.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Compute the map point projection <span id="S5.I1.i1.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{x}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">x</span></span></span></span></span></span></span></span></span> in the current frame. Discard if it lays out of the image bounds.</p>
</div>
</li>
<li id="S5.I1.i2" class="ltx_item">
<div id="S5.I1.i2.p1" class="ltx_para">
<p class="ltx_p">Compute the angle between the current viewing ray <span id="S5.I1.i2.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{v}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">v</span></span></span></span></span></span></span></span></span> and the map point mean viewing direction <span id="S5.I1.i2.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{n}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">n</span></span></span></span></span></span></span></span></span>. Discard
if <span id="S5.I1.i2.p1.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{v}\cdot\mathbf{n}&lt;\textrm{cos}(60^{\circ})"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">v</span></span></span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.004em; padding-bottom: 0.298em;">⋅</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">n</span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">&lt;</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1.5em;">cos</span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">60</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.591em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.298em;">∘</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span>.</p>
</div>
</li>
<li id="S5.I1.i3" class="ltx_item">
<div id="S5.I1.i3.p1" class="ltx_para">
<p class="ltx_p">Compute the distance <span id="S5.I1.i3.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="d"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span></span></span></span></span> from map point to camera center.
Discard if it is out of the scale invariance region of the map point <span id="S5.I1.i3.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="d\notin[d_{\textrm{min}},d_{\textrm{max}}]"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">∉</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">[</span></span><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.325em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1.5em;">min</span></span></span></span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.325em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1.5em;">max</span></span></span></span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">]</span></span></span></span></span></span></span>.</p>
</div>
</li>
<li id="S5.I1.i4" class="ltx_item">
<div id="S5.I1.i4.p1" class="ltx_para">
<p class="ltx_p">Compute the scale in the frame by the ratio <span id="S5.I1.i4.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="d/d_{\textrm{min}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">/</span></span></span></span><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.003em;">d</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.325em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1.5em;">min</span></span></span></span></span></span></span></span></span></span></span></span></span></span>.</p>
</div>
</li>
<li id="S5.I1.i5" class="ltx_item">
<div id="S5.I1.i5.p1" class="ltx_para">
<p class="ltx_p">Compare the representative descriptor <span id="S5.I1.i5.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{D}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">D</span></span></span></span></span></span></span></span></span> of the map point with the still unmatched ORB features in the frame, at the predicted scale, and
near <span id="S5.I1.i5.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{x}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">x</span></span></span></span></span></span></span></span></span>, and
associate the map point with the best match.</p>
</div>
</li>
</ol>
</div>
<div id="S5.SS4.p3" class="ltx_para">
<p class="ltx_p">The camera pose is finally optimized with all the map points found in the frame.</p>
</div>
</section>
<section id="S5.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">V-E </span><span class="ltx_text ltx_font_italic">New Keyframe Decision</span>
</h3>

<div id="S5.SS5.p1" class="ltx_para">
<p class="ltx_p">The last step is to decide if the current frame is spawned as a new keyframe. As there is a mechanism in the local mapping to cull redundant keyframes, we
will try to insert keyframes as fast as possible, because that makes the tracking more robust to challenging camera movements, typically rotations.
To insert a new keyframe all the following conditions must be met:</p>
<ol id="S5.I2" class="ltx_enumerate">
<li id="S5.I2.i1" class="ltx_item">
<div id="S5.I2.i1.p1" class="ltx_para">
<p class="ltx_p">More than 20 frames must have passed from the last global relocalization.</p>
</div>
</li>
<li id="S5.I2.i2" class="ltx_item">
<div id="S5.I2.i2.p1" class="ltx_para">
<p class="ltx_p">Local mapping is idle, or more than 20 frames have passed from last keyframe insertion.</p>
</div>
</li>
<li id="S5.I2.i3" class="ltx_item">
<div id="S5.I2.i3.p1" class="ltx_para">
<p class="ltx_p">Current frame tracks at least 50 points.
</p>
</div>
</li>
<li id="S5.I2.i4" class="ltx_item">
<div id="S5.I2.i4.p1" class="ltx_para">
<p class="ltx_p">Current frame tracks less than 90% points than <span id="S5.I2.i4.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{\mathrm{ref}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.23em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">r</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em; padding-right: 0.066em;">f</span></span></span></span></span></span></span></span></span></span></span></span></span>.</p>
</div>
</li>
</ol>
</div>
<div id="S5.SS5.p2" class="ltx_para">
<p class="ltx_p">Instead of using a distance criterion to other keyframes as PTAM, we impose a minimum visual change (condition 4). Condition 1 ensures a good relocalization
and condition 3 a good tracking. If a keyframe is inserted when the local mapping is busy (second part of condition 2), a signal is sent to stop local bundle adjustment, so that
it can process as soon as possible the new keyframe.</p>
</div>
</section>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">Vi </span><span class="ltx_text ltx_font_smallcaps">Local Mapping</span>
</h2>

<div id="S6.p1" class="ltx_para">
<p class="ltx_p">In this section we describe the steps performed by the local mapping with every new keyframe <span id="S6.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span>.</p>
</div>
<section id="S6.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Vi-a </span><span class="ltx_text ltx_font_italic">KeyFrame Insertion </span>
</h3>

<div id="S6.SS1.p1" class="ltx_para">
<p class="ltx_p">At first we update the covisibility graph, adding a new node for <span id="S6.SS1.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> and updating the edges resulting from the shared map points with other keyframes. We then
update the spanning tree linking <span id="S6.SS1.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> with the keyframe with most points in common. We then
compute the bags of words representation of the keyframe, that will help in the data association for triangulating new points.</p>
</div>
</section>
<section id="S6.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Vi-B </span><span class="ltx_text ltx_font_italic">Recent Map Points Culling</span>
</h3>

<div id="S6.SS2.p1" class="ltx_para">
<p class="ltx_p">Map points, in order to be retained in the map, must pass a restrictive test during the first three keyframes after creation,
that ensures that they are trackable and not wrongly triangulated, i.e due to spurious data association. A point must fulfill these
two conditions:</p>
</div>
<div id="S6.SS2.p2" class="ltx_para">
<ol id="S6.I1" class="ltx_enumerate">
<li id="S6.I1.i1" class="ltx_item">
<div id="S6.I1.i1.p1" class="ltx_para">
<p class="ltx_p">The tracking must find the point in more than the 25% of the frames in which it is predicted to be visible.</p>
</div>
</li>
<li id="S6.I1.i2" class="ltx_item">
<div id="S6.I1.i2.p1" class="ltx_para">
<p class="ltx_p">If more than one keyframe has passed from map point creation, it must be observed from at least three keyframes.</p>
</div>
</li>
</ol>
</div>
<div id="S6.SS2.p3" class="ltx_para">
<p class="ltx_p">Once a map point have passed this test, it can only be removed if at any time it is observed from less than three keyframes. This
can happen when keyframes are culled and when local bundle adjustment discards outlier observations. This policy makes our map
contain very few outliers.</p>
</div>
</section>
<section id="S6.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Vi-C </span><span class="ltx_text ltx_font_italic">New Map Point Creation</span>
</h3>

<div id="S6.SS3.p1" class="ltx_para">
<p class="ltx_p">New map points are created by triangulating ORB from connected keyframes <span id="S6.SS3.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathcal{K}_{c}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">K</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span></span></span></span></span></span> in the covisibility graph. For each unmatched ORB in <span id="S6.SS3.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span>
we search a match with other unmatched point in other keyframe. This matching is done as explained in Section <a href="#S3.SS5" title="III-E Bags of Words Place Recognition ‣ III System Overview ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">III-E</span></a> and
discard those matches that do not fulfill the epipolar constraint.
ORB pairs are triangulated, and to accept the new points, positive depth in both cameras, parallax, reprojection error and scale consistency are checked.
Initially a map point is observed from two keyframes but it could be matched in others, so it is
projected in the rest of connected keyframes, and correspondences are searched as detailed in section <a href="#S5.SS4" title="V-D Track Local Map ‣ V Tracking ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">V-D</span></a>.</p>
</div>
</section>
<section id="S6.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Vi-D </span><span class="ltx_text ltx_font_italic">Local Bundle Adjustment</span>
</h3>

<div id="S6.SS4.p1" class="ltx_para">
<p class="ltx_p">The <em class="ltx_emph ltx_font_italic">local BA</em> optimizes the currently processed keyframe <span id="S6.SS4.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span>, all the keyframes connected to it in the covisibility graph <span id="S6.SS4.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathcal{K}_{c}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">K</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span></span></span></span></span></span>,
and all the map points seen by those keyframes. All other keyframes that see those points but are not connected to the currently processed keyframe
are included in the optimization but remain fixed. Observations that are marked as outliers are discarded at the middle and at the end of the optimization.
See the Appendix for more details about this optimization.</p>
</div>
</section>
<section id="S6.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Vi-E </span><span class="ltx_text ltx_font_italic">Local Keyframe Culling</span>
</h3>

<div id="S6.SS5.p1" class="ltx_para">
<p class="ltx_p">In order to maintain a compact reconstruction, the local mapping tries to detect redundant keyframes and delete them.
This is beneficial as bundle adjustment complexity grows with the number of keyframes, but also because it enables lifelong operation
in the same environment as the number of keyframes will not grow unbounded, unless the visual content in the scene changes.
We discard all the keyframes in <span id="S6.SS5.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathcal{K}_{c}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-cal-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">K</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span></span></span></span></span></span></span></span></span> whose 90% of the map points have been seen in at least other three keyframes in the same or finer scale.
The scale condition ensures that map points maintain keyframes from which they are measured with most accuracy.
This policy was inspired by the one proposed in the work of Tan et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib24" title="" class="ltx_ref" target="_blank">24</a>]</cite>, where keyframes were discarded after a process of change detection.</p>
</div>
</section>
</section>
<section id="S7" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">Vii </span><span class="ltx_text ltx_font_smallcaps">Loop Closing</span>
</h2>

<div id="S7.p1" class="ltx_para">
<p class="ltx_p">The loop closing thread takes <span id="S7.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span>, the last keyframe processed by the local mapping, and tries to detect and close loops. The steps are next described.</p>
</div>
<section id="S7.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Vii-a </span><span class="ltx_text ltx_font_italic">Loop Candidates Detection</span>
</h3>

<div id="S7.SS1.p1" class="ltx_para">
<p class="ltx_p">At first we compute the similarity between the bag of words vector of <span id="S7.SS1.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> and all its neighbors in the covisibility graph (<span id="S7.SS1.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\theta_{min}=30"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">θ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">m</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">30</span></span></span></span></span></span></span>)
and retain the lowest score <span id="S7.SS1.p1.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="s_{\textrm{min}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">s</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.325em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1.5em;">min</span></span></span></span></span></span></span></span></span></span></span></span></span></span>.
Then we query the recognition database and discard all those keyframes whose score is lower than <span id="S7.SS1.p1.m4" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="s_{\textrm{min}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">s</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.325em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 1.5em;">min</span></span></span></span></span></span></span></span></span></span></span></span></span></span>. This is a similar operation to gain robustness
as the normalizing score in DBoW2, which is computed from the previous image, but here we use covisibility information. In addition all those keyframes
directly connected to <span id="S7.SS1.p1.m5" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> are discarded from the results.
To accept a loop candidate we must detect consecutively three loop candidates that are consistent (keyframes connected in the covisibility graph).
There can be several loop candidates if there are several places with similar appearance to <span id="S7.SS1.p1.m6" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span>.</p>
</div>
</section>
<section id="S7.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Vii-B </span><span class="ltx_text ltx_font_italic">Compute the Similarity Transformation</span>
</h3>

<div id="S7.SS2.p1" class="ltx_para">
<p class="ltx_p">In monocular SLAM there are seven degrees of freedom in which the map can drift, three translations, three rotations and a scale factor <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref" target="_blank">6</a>]</cite>.
Therefore to close a loop we need to compute a similarity transformation from the current keyframe <span id="S7.SS2.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> to the loop keyframe <span id="S7.SS2.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{l}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">l</span></span></span></span></span></span></span></span></span></span></span> that informs us about the error
accumulated in the loop. The computation of this similarity will serve also as geometrical validation of the loop.
</p>
</div>
<div id="S7.SS2.p2" class="ltx_para">
<p class="ltx_p">We first compute correspondences between ORB associated to map points in the current keyframe and the loop candidate keyframes,
following the procedure explained in section <a href="#S3.SS5" title="III-E Bags of Words Place Recognition ‣ III System Overview ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">III-E</span></a>. At this point we have 3D to 3D correspondences for each loop candidate. We alternatively perform RANSAC
iterations with each candidate, trying
to find a similarity transformation using the method of Horn <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib42" title="" class="ltx_ref" target="_blank">42</a>]</cite>.
If we find a similarity <span id="S7.SS2.p2.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{S}_{il}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">l</span></span></span></span></span></span></span></span></span></span></span> with enough inliers, we optimize it (see the Appendix), and perform a guided search of more correspondences. We optimize it again
and, if <span id="S7.SS2.p2.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{S}_{il}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">l</span></span></span></span></span></span></span></span></span></span></span> is supported by enough inliers, the loop with <span id="S7.SS2.p2.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{l}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">l</span></span></span></span></span></span></span></span></span></span></span> is accepted.</p>
</div>
</section>
<section id="S7.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Vii-C </span><span class="ltx_text ltx_font_italic">Loop Fusion</span>
</h3>

<div id="S7.SS3.p1" class="ltx_para">
<p class="ltx_p">The first step in the loop correction is to fuse duplicated map points and insert new edges in the covisibility graph that will attach the loop closure.
At first the current keyframe pose <span id="S7.SS3.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{T}_{iw}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">T</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span></span></span></span></span></span></span></span></span></span> is corrected with the similarity transformation <span id="S7.SS3.p1.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{S}_{il}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">l</span></span></span></span></span></span></span></span></span></span></span> and this correction is propagated to all the neighbors
of <span id="S7.SS3.p1.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span>, concatenating transformations, so that both sides of the loop get aligned.
All map points seen by the loop keyframe and its neighbors are projected into <span id="S7.SS3.p1.m4" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="K_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.04em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.04em;">K</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> and its neighbors and matches are searched in a narrow area around the projection, as done in
section <a href="#S5.SS4" title="V-D Track Local Map ‣ V Tracking ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">V-D</span></a>. All those map points matched and those that were inliers in the computation of <span id="S7.SS3.p1.m5" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{S}_{il}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">l</span></span></span></span></span></span></span></span></span></span></span> are fused.
All keyframes involved in the fusion will update their edges in the covisibility graph effectively creating edges that attach the loop closure.</p>
</div>
</section>
<section id="S7.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Vii-D </span><span class="ltx_text ltx_font_italic">Essential Graph Optimization</span>
</h3>

<div id="S7.SS4.p1" class="ltx_para">
<p class="ltx_p">To effectively close the loop, we perform a pose graph optimization over the <em class="ltx_emph ltx_font_italic">Essential Graph</em>, described in Section <a href="#S3.SS4" title="III-D Covisibility Graph and Essential Graph ‣ III System Overview ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">III-D</span></a>,
that distributes the loop closing error along the graph. The optimization is performed over
similarity transformations to correct the scale drift <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref" target="_blank">6</a>]</cite>. The error terms and cost function are detailed in
the Appendix.
After the optimization each map point is transformed according to the correction
of one of the keyframes that observes it.
</p>
</div>
</section>
</section>
<section id="S8" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">Viii </span><span class="ltx_text ltx_font_smallcaps">Experiments</span>
</h2>

<div id="S8.p1" class="ltx_para">
<p class="ltx_p">We have performed an extensive experimental validation of our system in the large robot sequence of NewCollege <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib39" title="" class="ltx_ref" target="_blank">39</a>]</cite>, evaluating
the general performance of the system, in 16 hand-held indoor sequences
of the TUM RGB-D benchmark <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref" target="_blank">38</a>]</cite>, evaluating the localization
accuracy, relocalization and lifelong capabilities, and in 10 car outdoor sequences from
the KITTI dataset <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib40" title="" class="ltx_ref" target="_blank">40</a>]</cite>, evaluating real-time large scale operation, localization accuracy and efficiency of the pose graph optimization.</p>
</div>
<div id="S8.p2" class="ltx_para">
<p class="ltx_p">Our system runs in real time and processes the images exactly at the frame rate they were acquired. We have carried out
all experiments with an Intel Core i7-4700MQ (4 cores @ 2.40GHz) and 8Gb RAM. ORB-SLAM has three main threads, that run in parallel with other tasks
from ROS and the operating system, which introduces some randomness in the results. For this reason, in some experiments, we report the median from several runs.</p>
</div>
<section id="S8.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Viii-a </span><span class="ltx_text ltx_font_italic">System Performance in the NewCollege Dataset</span>
</h3>

<div id="S8.SS1.p1" class="ltx_para">
<p class="ltx_p">The NewCollege dataset <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib39" title="" class="ltx_ref" target="_blank">39</a>]</cite> contains a 2.2km sequence from a robot traversing a campus and adjacent parks. The sequence is recorded by a stereo camera
at 20 fps and a resolution <span id="S8.SS1.p1.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="512\times 382"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">512</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">382</span></span></span></span></span></span></span>. It contains
several loops and fast rotations that makes the sequence quite challenging for monocular vision. To the best of our knowledge there is no other
monocular system in the literature able to process this whole sequence. For example Strasdat et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref" target="_blank">7</a>]</cite>, despite being able to close loops and work in
large scale environments, only showed monocular results for a small part of this sequence.</p>
</div>
<figure id="S8.T1" class="ltx_table">

<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Thread</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Operation</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:24.2pt;">
<p class="ltx_p ltx_align_center">Median</p>
<p class="ltx_p ltx_align_center">(ms)</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:21.3pt;">
<p class="ltx_p ltx_align_center">Mean</p>
<p class="ltx_p ltx_align_center">(ms)</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:21.3pt;">
<p class="ltx_p ltx_align_center">Std</p>
<p class="ltx_p ltx_align_center">(ms)</p>
</div>
</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_tt" rowspan="2">TRACKING</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_tt">ORB extraction</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">11.10</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">11.42</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">1.61</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Initial Pose Est.</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">3.38</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">3.45</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.99</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_th ltx_th_row ltx_border_l ltx_border_r"/>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Track Local Map</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">14.84</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">16.01</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">9.98</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_th ltx_th_row ltx_border_l ltx_border_r"/>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Total</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">30.57</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">31.60</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">10.39</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_tt" rowspan="3">
<span class="ltx_inline-block ltx_parbox ltx_align_middle" style="width:42.7pt;">
<span class="ltx_p">LOCAL</span>
<span class="ltx_p">MAPPING</span>
</span>
</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_tt">KeyFrame Insertion</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">10.29</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">11.88</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">5.03</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Map Point Culling</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.10</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">3.18</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">6.70</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Map Point Creation</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">66.79</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">72.96</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">31.48</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_th ltx_th_row ltx_border_l ltx_border_r"/>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Local BA</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">296.08</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">360.41</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">171.11</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_th ltx_th_row ltx_border_l ltx_border_r"/>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">KeyFrame Culling</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">8.07</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">15.79</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">18.98</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_th ltx_th_row ltx_border_b ltx_border_l ltx_border_r"/>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r ltx_border_t">Total</th>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">383.59</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">464.27</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">217.89</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">TABLE I: </span>Tracking and Mapping times in NewCollege</figcaption></figure>
<figure id="S8.T2" class="ltx_table">

<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr class="ltx_tr">
<th class="ltx_td ltx_th ltx_th_column ltx_border_r" colspan="3"/>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="2">Loop Detection (ms)</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="2">Loop Correction (s)</th>
<th class="ltx_td ltx_th ltx_th_column"/>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t">Loop</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">KeyFrames</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:59.8pt;">
<p class="ltx_p ltx_align_center">Essential Graph</p>
<p class="ltx_p ltx_align_center">Edges</p>
</div>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:56.9pt;">
<p class="ltx_p ltx_align_center">Candidates</p>
<p class="ltx_p ltx_align_center">Detection</p>
</div>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:56.9pt;">
<p class="ltx_p ltx_align_center">Similarity</p>
<p class="ltx_p ltx_align_center">Transformation</p>
</div>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">Fusion</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:59.8pt;">
<p class="ltx_p">Essential Graph</p>
<p class="ltx_p">Optimization</p>
</div>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">Total (s)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">287</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1347</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">4.71</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">20.77</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.20</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.26</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.51</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">2</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1082</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">5950</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">4.14</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">17.98</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.39</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.06</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.52</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">3</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1279</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">7128</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">9.82</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">31.29</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.95</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.26</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">2.27</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">4</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">2648</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">12547</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">12.37</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">30.36</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.97</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">2.30</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">3.33</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">5</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">3150</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">16033</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">14.71</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">41.28</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.73</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">2.80</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">4.60</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_l ltx_border_r ltx_border_t">6</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">4496</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">21797</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">13.52</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">48.68</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">0.97</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">3.62</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">4.69</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">TABLE II: </span>Loop closing times in NewCollege</figcaption></figure>
<figure id="S8.F4" class="ltx_figure"><img src="https://media.arxiv-vanity.com/render-output/5535659/x7.png" id="S8.F4.g1" class="ltx_graphics" width="317" height="120" alt="Example of loop detected in the NewCollege sequence. We draw the inlier correspondences supporting the similarity transformation found."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Fig. 4: </span>Example of loop detected in the NewCollege sequence. We draw the inlier correspondences supporting the similarity transformation found.</figcaption>
</figure>
<figure id="S8.F5" class="ltx_figure">
<table style="width:100%;">
<tbody><tr>
<td class="ltx_subfigure">
<figure id="S8.F5.fig1" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x8.png" id="S8.F5.g1" class="ltx_graphics" width="318" height="145" alt="Map before and after a loop closure in the NewCollege sequence. The loop closure match is drawn in blue, the trajectory in green, and&#10;the local map for the tracking at that moment in red. The local map is extended along both sides of the loop after it is closed."/>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F5.fig2" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x9.png" id="S8.F5.g2" class="ltx_graphics" width="318" height="212" alt="Map before and after a loop closure in the NewCollege sequence. The loop closure match is drawn in blue, the trajectory in green, and&#10;the local map for the tracking at that moment in red. The local map is extended along both sides of the loop after it is closed."/>
</figure>
</td>
</tr>
</tbody></table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Fig. 5: </span>Map before and after a loop closure in the NewCollege sequence. The loop closure match is drawn in blue, the trajectory in green, and
the local map for the tracking at that moment in red. The local map is extended along both sides of the loop after it is closed.</figcaption>
</figure>
<div id="S8.SS1.p2" class="ltx_para">
<p class="ltx_p">As an example of our loop closing procedure we show in Fig. <a href="#S8.F4" title="Fig. 4 ‣ VIII-A System Performance in the NewCollege Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">4</span></a> the detection of a loop with the inliers that support the similarity transformation.
Fig. <a href="#S8.F5" title="Fig. 5 ‣ VIII-A System Performance in the NewCollege Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">5</span></a> shows the reconstruction before and after the loop closure.
In red it is shown the local map, which after the loop closure extends along both sides of the loop closure.
The whole map after processing the full sequence at its real frame-rate is shown in Fig. <a href="#S8.F6" title="Fig. 6 ‣ VIII-A System Performance in the NewCollege Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">6</span></a>. The big loop on the right
does not perfectly align because it was traversed in opposite directions and the place recognizer was not able to find loop closures.</p>
</div>
<div id="S8.SS1.p3" class="ltx_para">
<p class="ltx_p">We have extracted statistics of the times spent by each thread in this experiment. Table <a href="#S8.T1" title="TABLE I ‣ VIII-A System Performance in the NewCollege Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">I</span></a> shows the results for the tracking and the local mapping.
Tracking works at frame-rates around 25-30Hz, being the most demanding task to track
the local map. If needed this time could be reduced limiting the number of keyframes that are included in the local map.
In the local mapping thread the most demanding task is local bundle adjustment. The <em class="ltx_emph ltx_font_italic">local BA</em> time varies if the robot is exploring or in a well mapped area, because
during exploration bundle adjustment is interrupted if tracking inserts a new keyframe, as explained in section <a href="#S5.SS5" title="V-E New Keyframe Decision ‣ V Tracking ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">V-E</span></a>. In case
of not needing new keyframes local bundle adjustment performs a generous number of prefixed iterations.</p>
</div>
<div id="S8.SS1.p4" class="ltx_para">
<p class="ltx_p">Table <a href="#S8.T2" title="TABLE II ‣ VIII-A System Performance in the NewCollege Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">II</span></a> shows the results for each of the 6 loop closures found. It can be seen how the loop detection increases sublinearly with the number of keyframes.
This is due
to the efficient querying of the database that only compare the subset of images with words in common,
which demonstrates the potential of bag of words for place recognition. Our <em class="ltx_emph ltx_font_italic">Essential Graph</em> includes edges
around 5 times the number of keyframes, which is a quite sparse graph.</p>
</div>
<figure id="S8.F6" class="ltx_figure"><img src="https://media.arxiv-vanity.com/render-output/5535659/x10.png" id="S8.F6.g1" class="ltx_graphics" width="317" height="221" alt="ORB-SLAM reconstruction of the full sequence of NewCollege. The bigger loop on the right is traversed in opposite directions and not visual loop closures were found, therefore they do not perfectly align."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Fig. 6: </span>ORB-SLAM reconstruction of the full sequence of NewCollege. The bigger loop on the right is traversed in opposite directions and not visual loop closures were found, therefore they do not perfectly align.</figcaption>
</figure>
</section>
<section id="S8.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Viii-B </span><span class="ltx_text ltx_font_italic">Localization Accuracy in the TUM RGB-D Benchmark</span>
</h3>

<div id="S8.SS2.p1" class="ltx_para">
<p class="ltx_p">The TUM RGB-D benchmark <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref" target="_blank">38</a>]</cite> is an excellent dataset to evaluate the accuracy of camera localization as it provides several sequences with accurate
ground truth obtained with an external motion capture system. We have discarded all those sequences that we consider that are not suitable for pure monocular
SLAM systems, as they contain strong rotations, no texture or no motion.</p>
</div>
<div id="S8.SS2.p2" class="ltx_para">
<p class="ltx_p">For comparison we have also executed the novel, direct, semi-dense LSD-SLAM <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref" target="_blank">10</a>]</cite> and PTAM <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref" target="_blank">4</a>]</cite> in the benchmark.
We compare also with the trajectories generated by RGBD-SLAM <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib43" title="" class="ltx_ref" target="_blank">43</a>]</cite> which are provided for some of the sequences in the benchmark website.
In order to compare ORB-SLAM, LSD-SLAM and PTAM with the ground truth, we align the keyframe trajectories using a similarity transformation, as scale is unknown,
and measure the absolute trajectory error (ATE) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref" target="_blank">38</a>]</cite>. In the case of RGBD-SLAM we align the trajectories with a rigid body transformation, but also a similarity
to check if the scale was well recovered. LSD-SLAM initializes from random depth values and takes time to converge, therefore we have discarded the first 10 keyframes when comparing with
the ground truth. For PTAM we manually selected two frames from which we get a good initialization.
Table <a href="#S8.T3" title="TABLE III ‣ VIII-B Localization Accuracy in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">III</span></a> shows the median results over 5 executions in each of the 16 sequences selected.</p>
</div>
<div id="S8.SS2.p3" class="ltx_para">
<p class="ltx_p">It can be seen that ORB-SLAM is able to process all the sequences, except for <em class="ltx_emph ltx_font_italic">fr3_nostructure_texture_far</em> (fr3_nstr_tex_far). This is a planar scene that because of the camera
trajectory with respect to the plane has two possible interpretations, i.e. the twofold ambiguity described in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref" target="_blank">27</a>]</cite>. Our initialization method detects the ambiguity
and for safety refuses to initialize. PTAM initializes selecting sometimes the true solution and others the corrupted one, in which case the error is unacceptable.
We have not noticed two different reconstructions from LSD-SLAM but the error in this sequence is very high.
In the rest of the sequences, PTAM and LSD-SLAM exhibit less robustness than our method, loosing track in eight and three sequences respectively.</p>
</div>
<div id="S8.SS2.p4" class="ltx_para">
<p class="ltx_p">In terms of accuracy ORB-SLAM and PTAM are similar in open trajectories, while ORB-SLAM achieves higher accuracy when detecting large loops as in the
sequence <em class="ltx_emph ltx_font_italic">fr3</em>_<em class="ltx_emph ltx_font_italic">nostructure</em>_<em class="ltx_emph ltx_font_italic">texture</em>_<em class="ltx_emph ltx_font_italic">near</em>_<em class="ltx_emph ltx_font_italic">withloop</em> (fr3_nstr_tex_near). The most surprising results is that both PTAM and ORB-SLAM are clearly more accurate than LSD-SLAM and RGBD-SLAM.
One of the possible causes can be that they reduce
the map optimization to a pose-graph optimization were sensor measurements are discarded, while we perform bundle adjustment and
jointly optimize cameras and map over sensor measurements, which is the gold standard
algorithm to solve structure from motion <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref" target="_blank">2</a>]</cite>. We further discuss this result in Section <a href="#S9.SS2" title="IX-B Sparse/Feature-based vs. Dense/Direct Methods ‣ IX Conclusions and Discussion ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">IX-B</span></a>. Another interesting result
is that LSD-SLAM seems to be less robust to dynamic objects than our system
as seen in <em class="ltx_emph ltx_font_italic">fr2_desk_with_person</em> and <em class="ltx_emph ltx_font_italic">fr3_walking_xyz</em>.</p>
</div>
<div id="S8.SS2.p5" class="ltx_para">
<p class="ltx_p">We have noticed that RGBD-SLAM has a bias in the scale in <em class="ltx_emph ltx_font_italic">fr2</em> sequences,
as aligning
the trajectories with 7 DoF significantly reduces the error.
Finally it should be noted that Engel et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref" target="_blank">10</a>]</cite> reported that PTAM has less accuracy than
LSD-SLAM in <em class="ltx_emph ltx_font_italic">fr2_xyz</em> with an RMSE of 24.28cm. However, the paper does not give enough details on how those results were obtained,
and we have been unable to reproduce them.</p>
</div>
<figure id="S8.T3" class="ltx_table">

<table class="ltx_tabular ltx_align_left ltx_centering ltx_align_middle">
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<td class="ltx_td ltx_border_r"/>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" colspan="4">Absolute KeyFrame Trajectory RMSE (cm)</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_border_r"/>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">ORB-SLAM</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">PTAM</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">LSD-SLAM</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">RGBD-</p>
<p class="ltx_p ltx_align_center">SLAM</p>
</div>
</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<p class="ltx_p ltx_parbox ltx_align_middle" style="width:28.5pt;">fr1_xyz</p>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">0.90</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.15</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">9.00</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.34 (1.34)</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<p class="ltx_p ltx_parbox ltx_align_middle" style="width:28.5pt;">fr2_xyz</p>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.30</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">0.20</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">2.15</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">2.61 (1.42)</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<p class="ltx_p ltx_parbox ltx_align_middle" style="width:28.5pt;">fr1_floor</p>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">2.99</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">38.07</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">3.51 (3.51)</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<p class="ltx_p ltx_parbox ltx_align_middle" style="width:28.5pt;">fr1_desk</p>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">1.69</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">10.65</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">2.58 (2.52)</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">fr2_360</p>
<p class="ltx_p ltx_align_center">_kidnap</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">3.81</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">2.63</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">393.3 (100.5)</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<p class="ltx_p ltx_parbox ltx_align_middle" style="width:28.5pt;">fr2_desk</p>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">0.88</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">4.57</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">9.50 (3.94)</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">fr3_long</p>
<p class="ltx_p ltx_align_center">_office</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">3.45</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">38.53</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">-</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:37.0pt;">
<p class="ltx_p ltx_align_center">fr3_nstr_</p>
<p class="ltx_p ltx_align_center">tex_far</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:34.1pt;">
<p class="ltx_p ltx_align_center">ambiguity</p>
<p class="ltx_p ltx_align_center">detected</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">4.92 /</p>
<p class="ltx_p ltx_align_center">34.74</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">18.31</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">-</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:37.0pt;">
<p class="ltx_p ltx_align_center">fr3_nstr_</p>
<p class="ltx_p ltx_align_center">tex_near</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">1.39</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">2.74</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">7.54</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">-</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">fr3_str_</p>
<p class="ltx_p ltx_align_center">tex_far</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">0.77</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.93</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">7.95</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">-</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">fr3_str_</p>
<p class="ltx_p ltx_align_center">tex_near</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.58</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">1.04</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">-</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">fr2_desk</p>
<p class="ltx_p ltx_align_center">_person</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">0.63</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">31.73</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">6.97 (2.00)</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">fr3_sit_</p>
<p class="ltx_p ltx_align_center">xyz</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">0.79</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.83</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">7.73</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">-</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">fr3_sit_</p>
<p class="ltx_p ltx_align_center">_halfsph</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">1.34</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">5.87</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">-</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">fr3_walk</p>
<p class="ltx_p ltx_align_center">_xyz</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">1.24</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">12.44</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">-</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_l ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p">fr3_walk</p>
<p class="ltx_p">_halfsph</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">1.74</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">-</td>
</tr>
</tbody>
</table>
<p class="ltx_p ltx_align_left">Results for ORB-SLAM, PTAM and LSD-SLAM are the median over 5 executions in each sequence. The
trajectories have been aligned with 7DoF with the ground truth.
Trajectories for RGBD-SLAM are taken from the benchmark website, only available for fr1 and fr2 sequences, and
have been aligned with 6DoF and 7DoF (results between brackets).
X means that the tracking is lost at some point and a significant portion of the sequence is not processed by the system.</p>
<figcaption class="ltx_caption ltx_align_left"><span class="ltx_tag ltx_tag_table">TABLE III: </span>Keyframe Localization Error Comparison in the
TUM RGB-D Benchmark<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref" target="_blank">38</a>]</cite></figcaption></figure>
</section>
<section id="S8.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Viii-C </span><span class="ltx_text ltx_font_italic">Relocalization in the TUM RGB-D Benchmark</span>
</h3>

<div id="S8.SS3.p1" class="ltx_para">
<p class="ltx_p">We perform two relocalization experiments in the TUM RGB-D benchmark. In the first experiment we build a map with the first 30 seconds
of the sequence <em class="ltx_emph ltx_font_italic">fr2_xyz</em> and perform global relocalization with every successive frame and evaluate the accuracy of the recovered poses.
We perform the same experiment with PTAM for comparison. Fig. <a href="#S8.F7" title="Fig. 7 ‣ VIII-C Relocalization in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">7</span></a> shows the keyframes used to create the initial map, the
poses of the relocalized frames and the ground truth for those frames. It can be seen that PTAM is only able to relocalize frames which are near to the
keyframes due to the little invariance of its relocalization method. Table <a href="#S8.T4" title="TABLE IV ‣ VIII-C Relocalization in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">IV</span></a> shows the recall and the error with respect to the ground truth.
ORB-SLAM accurately relocalizes more than the double of frames than PTAM.
In the second experiment we create an initial map with sequence <em class="ltx_emph ltx_font_italic">fr3_sitting_xyz</em> and try to relocalize all frames from <em class="ltx_emph ltx_font_italic">fr3_walking_xyz</em>. This is a challenging
experiment as there are big occlusions due to people moving in the scene. Here PTAM finds no relocalizations while our system relocalizes 78% of the frames,
as can be seen in Table <a href="#S8.T4" title="TABLE IV ‣ VIII-C Relocalization in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">IV</span></a>. Fig. <a href="#S8.F8" title="Fig. 8 ‣ VIII-C Relocalization in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">8</span></a> shows some examples of challenging relocalizations performed by our system in these experiments.
</p>
</div>
<figure id="S8.F7" class="ltx_figure"><img src="https://media.arxiv-vanity.com/render-output/5535659/x11.png" id="S8.F7.g1" class="ltx_graphics" width="317" height="258" alt="Relocalization experiment in "/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Fig. 7: </span>Relocalization experiment in <em class="ltx_emph ltx_font_italic">fr2_xyz</em>. Map is initially created during the first 30 seconds of the sequence (KFs). The goal is to relocalize subsequent frames.
Successful relocalizations (R) of our system and PTAM are shown. The ground truth (GT) is only shown for the frames to relocalize.</figcaption>
</figure>
<figure id="S8.F8" class="ltx_figure">
<table style="width:100%;">
<tbody><tr>
<td class="ltx_subfigure">
<figure id="S8.F8.fig1" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x12.png" id="S8.F8.g1" class="ltx_graphics" width="317" height="120" alt="Example of challenging relocalizations (severe scale change, dynamic objects) that our system successfully found in the relocalization experiments."/>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F8.fig2" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x13.png" id="S8.F8.g2" class="ltx_graphics" width="317" height="120" alt="Example of challenging relocalizations (severe scale change, dynamic objects) that our system successfully found in the relocalization experiments."/>
</figure>
</td>
</tr>
</tbody></table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Fig. 8: </span>Example of challenging relocalizations (severe scale change, dynamic objects) that our system successfully found in the relocalization experiments.</figcaption>
</figure>
<figure id="S8.T4" class="ltx_table">

<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<th class="ltx_td ltx_th ltx_th_row"/>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" colspan="2">Initial Map</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" colspan="3">Relocalization</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">System</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t">KFs</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:21.3pt;">
<p class="ltx_p ltx_align_center">RMSE</p>
<p class="ltx_p ltx_align_center">(cm)</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:21.3pt;">
<p class="ltx_p ltx_align_center">Recall</p>
<p class="ltx_p ltx_align_center">(%)</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:21.3pt;">
<p class="ltx_p ltx_align_center">RMSE</p>
<p class="ltx_p ltx_align_center">(cm)</p>
</div>
</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:42.7pt;">
<p class="ltx_p">Max. Error</p>
<p class="ltx_p">(cm)</p>
</div>
</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" colspan="6">
<em class="ltx_emph ltx_font_italic">fr2_xyz</em>. 2769 frames to relocalize</th>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">PTAM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t">37</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.19</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">34.9</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.26</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.52</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">ORB-SLAM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t">24</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.19</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">78.4</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.38</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.67</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" colspan="6">
<br class="ltx_break"/>
<br class="ltx_break"/></th>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r" colspan="6">
<em class="ltx_emph ltx_font_italic">fr3_walking_xyz</em>. 859 frames to relocalize</th>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">
<br class="ltx_break"/>
</th>
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t"/>
<td class="ltx_td ltx_border_r ltx_border_t"/>
<td class="ltx_td ltx_border_r ltx_border_t"/>
<td class="ltx_td ltx_border_r ltx_border_t"/>
<td class="ltx_td ltx_border_r ltx_border_t"/>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r">PTAM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r">34</th>
<td class="ltx_td ltx_align_center ltx_border_r">0.83</td>
<td class="ltx_td ltx_align_center ltx_border_r">0.0</td>
<td class="ltx_td ltx_align_center ltx_border_r">-</td>
<td class="ltx_td ltx_align_center ltx_border_r">-</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">ORB-SLAM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t">31</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.82</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">77.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.32</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">4.95</td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">
<br class="ltx_break"/>
</th>
<th class="ltx_td ltx_th ltx_th_row ltx_border_t"/>
<td class="ltx_td ltx_border_t"/>
<td class="ltx_td ltx_border_t"/>
<td class="ltx_td ltx_border_t"/>
<td class="ltx_td ltx_border_t"/>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">TABLE IV: </span>Results for the relocalization experiments</figcaption></figure>
</section>
<section id="S8.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Viii-D </span><span class="ltx_text ltx_font_italic">Lifelong Experiment in the TUM RGB-D Benchmark</span>
</h3>

<figure id="S8.F9" class="ltx_figure"><img src="https://media.arxiv-vanity.com/render-output/5535659/x14.png" id="S8.F9.g1" class="ltx_graphics" width="318" height="138" alt="Lifelong experiment in a static environment where the camera is always looking at the same place from different viewpoints.&#10;PTAM is always inserting keyframes, while ORB-SLAM is able to prune redundant keyframes and maintains a bounded-size map."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Fig. 9: </span>Lifelong experiment in a static environment where the camera is always looking at the same place from different viewpoints.
PTAM is always inserting keyframes, while ORB-SLAM is able to prune redundant keyframes and maintains a bounded-size map.</figcaption>
</figure>
<figure id="S8.F10" class="ltx_figure">
<table style="width:100%;">
<tbody><tr>
<td class="ltx_subfigure">
<figure id="S8.F10.sf1" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x15.png" id="S8.F10.sf1.g1" class="ltx_graphics" width="318" height="157" alt="Lifelong experiment in a dynamic environment from the TUM RGB-D Benchmark."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(a)</span> </span><span class="ltx_text" style="font-size:80%;">Evolution of the number of keyframes in the map</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F10.sf2" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x16.png" id="S8.F10.sf2.g1" class="ltx_graphics" width="318" height="157" alt="Lifelong experiment in a dynamic environment from the TUM RGB-D Benchmark."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(b)</span> </span><span class="ltx_text" style="font-size:80%;">Keyframe creation and destruction. Each horizontal line corresponds to a keyframe, from its creation frame until its destruction</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F10.sf3" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x17.png" id="S8.F10.sf3.g1" class="ltx_graphics" width="317" height="130" alt="Lifelong experiment in a dynamic environment from the TUM RGB-D Benchmark."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(c)</span> </span><span class="ltx_text" style="font-size:80%;">Histogram of the survival time of all spawned keyframes with respect to the remaining time of the experiment</span></figcaption>
</figure>
</td>
</tr>
</tbody></table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Fig. 10: </span>Lifelong experiment in a dynamic environment from the TUM RGB-D Benchmark.</figcaption>
</figure>
<div id="S8.SS4.p1" class="ltx_para">
<p class="ltx_p">Previous relocalization experiments have shown that our system is able to localize in a map from very different viewpoints and robustly under moderate dynamic changes.
This property in conjunction with our keyframe culling procedure allows to operate lifelong in the same environment under different viewpoints and
some dynamic changes.</p>
</div>
<div id="S8.SS4.p2" class="ltx_para">
<p class="ltx_p">In the case of a completely static scenario our system is able to maintain the number of keyframes bounded even if the camera is looking
at the scene from different viewpoints. We demonstrate it in a custom sequence were the camera is looking at the same desk during 93 seconds but performing
a trajectory so that the viewpoint is always changing. We compare the evolution of the number of keyframes in our map and those generated by PTAM in Fig. <a href="#S8.F9" title="Fig. 9 ‣ VIII-D Lifelong Experiment in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">9</span></a>.
It can be seen how PTAM is always inserting keyframes, while our mechanism to prune redundant keyframes makes its number to saturate.</p>
</div>
<div id="S8.SS4.p3" class="ltx_para">
<p class="ltx_p">While the lifelong operation in a static scenario should be a requirement of any SLAM system, more interesting is the case where dynamic
changes occur. We analyze the behavior of our system in such scenario by running consecutively the dynamic sequences from <em class="ltx_emph ltx_font_italic">fr3</em>: <em class="ltx_emph ltx_font_italic">sitting_xyz</em>, <em class="ltx_emph ltx_font_italic">sitting_halfsphere</em>, <em class="ltx_emph ltx_font_italic">sitting_rpy</em>,
<em class="ltx_emph ltx_font_italic">walking_xyz</em>, <em class="ltx_emph ltx_font_italic">walking_halfspehere</em> and <em class="ltx_emph ltx_font_italic">walking_rpy</em>. All the sequences focus the camera to the same desk but perform different
trajectories, while people are moving and change some objects like chairs. Fig. <a href="#S8.F10.sf1" title="(a) ‣ Fig. 10 ‣ VIII-D Lifelong Experiment in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">10(a)</span></a> shows the evolution of the total number of keyframes in the map, and
Fig. <a href="#S8.F10.sf2" title="(b) ‣ Fig. 10 ‣ VIII-D Lifelong Experiment in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">10(b)</span></a> shows for each keyframe its frame of creation and destruction, showing how long the keyframes have survived in the map.
It can be seen that during the first two sequences the map size grows as all the views of the scene are being seen for the first time. In Fig. <a href="#S8.F10.sf2" title="(b) ‣ Fig. 10 ‣ VIII-D Lifelong Experiment in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">10(b)</span></a> we can
see that several keyframes created during these two first sequences are maintained in the map during the whole experiment. During the sequences <em class="ltx_emph ltx_font_italic">sitting_rpy</em> and
<em class="ltx_emph ltx_font_italic">walking_xyz</em> the map does not grow, because the map created so far explains well the scene. In contrast, during the last two sequences, more keyframes are inserted
showing that there are some novelties in the scene that were not yet represented, due probably to dynamic changes. Finally Fig. <a href="#S8.F10.sf3" title="(c) ‣ Fig. 10 ‣ VIII-D Lifelong Experiment in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">10(c)</span></a> shows a histogram of the
keyframes according to the time they have survived with respect to the remaining time of the sequence from its moment of creation. It can be seen that most of the keyframes
are destroyed by the culling procedure soon after creation, and only a small subset survive until the end of the experiment. On one hand, this shows that our system
has a generous keyframe spawning policy, which is very useful when performing abrupt motions in exploration. On the other hand the system is eventually able
to select a small representative subset of those keyframes.
</p>
</div>
<div id="S8.SS4.p4" class="ltx_para">
<p class="ltx_p">In these lifelong experiments we have shown that our map grows with the content of the scene but not with the time, and that is able to store the dynamic changes
of the scene which could be useful to perform some scene understanding by accumulating experience in an environment.</p>
</div>
</section>
<section id="S8.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Viii-E </span><span class="ltx_text ltx_font_italic">Large Scale and Large Loop Closing in the KITTI Dataset</span>
</h3>

<figure id="S8.F11" class="ltx_figure">
<table style="width:100%;">
<tbody><tr>
<td class="ltx_subfigure">
<figure id="S8.F11.fig1" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x18.png" id="S8.F11.g1" class="ltx_graphics" width="209" height="162" alt="Sequences 00, 05 and 07 from the odometry benchmark of the KITTI dataset.&#10;Left: points and keyframe trajectory. Center: trajectory and ground truth. Right: trajectory after 20 iterations of full BA. The output of our system is quite accurate,&#10;while it can be slightly improved with some iterations of BA."/>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F11.fig2" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x19.png" id="S8.F11.g2" class="ltx_graphics" width="209" height="164" alt="Sequences 00, 05 and 07 from the odometry benchmark of the KITTI dataset.&#10;Left: points and keyframe trajectory. Center: trajectory and ground truth. Right: trajectory after 20 iterations of full BA. The output of our system is quite accurate,&#10;while it can be slightly improved with some iterations of BA."/>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F11.fig3" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x20.png" id="S8.F11.g3" class="ltx_graphics" width="209" height="164" alt="Sequences 00, 05 and 07 from the odometry benchmark of the KITTI dataset.&#10;Left: points and keyframe trajectory. Center: trajectory and ground truth. Right: trajectory after 20 iterations of full BA. The output of our system is quite accurate,&#10;while it can be slightly improved with some iterations of BA."/>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F11.fig4" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x21.png" id="S8.F11.g4" class="ltx_graphics" width="209" height="162" alt="Sequences 00, 05 and 07 from the odometry benchmark of the KITTI dataset.&#10;Left: points and keyframe trajectory. Center: trajectory and ground truth. Right: trajectory after 20 iterations of full BA. The output of our system is quite accurate,&#10;while it can be slightly improved with some iterations of BA."/>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F11.fig5" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x22.png" id="S8.F11.g5" class="ltx_graphics" width="209" height="164" alt="Sequences 00, 05 and 07 from the odometry benchmark of the KITTI dataset.&#10;Left: points and keyframe trajectory. Center: trajectory and ground truth. Right: trajectory after 20 iterations of full BA. The output of our system is quite accurate,&#10;while it can be slightly improved with some iterations of BA."/>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F11.fig6" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x23.png" id="S8.F11.g6" class="ltx_graphics" width="209" height="164" alt="Sequences 00, 05 and 07 from the odometry benchmark of the KITTI dataset.&#10;Left: points and keyframe trajectory. Center: trajectory and ground truth. Right: trajectory after 20 iterations of full BA. The output of our system is quite accurate,&#10;while it can be slightly improved with some iterations of BA."/>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F11.fig7" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x24.png" id="S8.F11.g7" class="ltx_graphics" width="209" height="162" alt="Sequences 00, 05 and 07 from the odometry benchmark of the KITTI dataset.&#10;Left: points and keyframe trajectory. Center: trajectory and ground truth. Right: trajectory after 20 iterations of full BA. The output of our system is quite accurate,&#10;while it can be slightly improved with some iterations of BA."/>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F11.fig8" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x25.png" id="S8.F11.g8" class="ltx_graphics" width="210" height="165" alt="Sequences 00, 05 and 07 from the odometry benchmark of the KITTI dataset.&#10;Left: points and keyframe trajectory. Center: trajectory and ground truth. Right: trajectory after 20 iterations of full BA. The output of our system is quite accurate,&#10;while it can be slightly improved with some iterations of BA."/>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F11.fig9" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x26.png" id="S8.F11.g9" class="ltx_graphics" width="210" height="165" alt="Sequences 00, 05 and 07 from the odometry benchmark of the KITTI dataset.&#10;Left: points and keyframe trajectory. Center: trajectory and ground truth. Right: trajectory after 20 iterations of full BA. The output of our system is quite accurate,&#10;while it can be slightly improved with some iterations of BA."/>
</figure>
</td>
</tr>
</tbody></table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Fig. 11: </span>Sequences 00, 05 and 07 from the odometry benchmark of the KITTI dataset.
Left: points and keyframe trajectory. Center: trajectory and ground truth. Right: trajectory after 20 iterations of full BA. The output of our system is quite accurate,
while it can be slightly improved with some iterations of BA.</figcaption>
</figure>
<figure id="S8.F12" class="ltx_figure">
<table style="width:100%;">
<tbody><tr>
<td class="ltx_subfigure">
<figure id="S8.F12.sf1" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x27.png" id="S8.F12.sf1.g1" class="ltx_graphics" width="149" height="117" alt="ORB-SLAM keyframe trajectories in sequences 02, 03, 04 ,06, 08, 09 and 10 from the odometry benchmark of the KITTI dataset.&#10;Sequence 08 does not contains loops and drift (especially scale) is not corrected."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(a)</span> </span><span class="ltx_text" style="font-size:80%;">Sequence 02</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F12.sf2" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x28.png" id="S8.F12.sf2.g1" class="ltx_graphics" width="149" height="117" alt="ORB-SLAM keyframe trajectories in sequences 02, 03, 04 ,06, 08, 09 and 10 from the odometry benchmark of the KITTI dataset.&#10;Sequence 08 does not contains loops and drift (especially scale) is not corrected."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(b)</span> </span><span class="ltx_text" style="font-size:80%;">Sequence 03</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F12.sf3" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x29.png" id="S8.F12.sf3.g1" class="ltx_graphics" width="149" height="118" alt="ORB-SLAM keyframe trajectories in sequences 02, 03, 04 ,06, 08, 09 and 10 from the odometry benchmark of the KITTI dataset.&#10;Sequence 08 does not contains loops and drift (especially scale) is not corrected."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(c)</span> </span><span class="ltx_text" style="font-size:80%;">Sequence 04</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F12.sf4" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x30.png" id="S8.F12.sf4.g1" class="ltx_graphics" width="149" height="117" alt="ORB-SLAM keyframe trajectories in sequences 02, 03, 04 ,06, 08, 09 and 10 from the odometry benchmark of the KITTI dataset.&#10;Sequence 08 does not contains loops and drift (especially scale) is not corrected."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(d)</span> </span><span class="ltx_text" style="font-size:80%;">Sequence 06</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F12.sf5" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x31.png" id="S8.F12.sf5.g1" class="ltx_graphics" width="149" height="117" alt="ORB-SLAM keyframe trajectories in sequences 02, 03, 04 ,06, 08, 09 and 10 from the odometry benchmark of the KITTI dataset.&#10;Sequence 08 does not contains loops and drift (especially scale) is not corrected."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(e)</span> </span><span class="ltx_text" style="font-size:80%;">Sequence 08</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F12.sf6" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x32.png" id="S8.F12.sf6.g1" class="ltx_graphics" width="149" height="117" alt="ORB-SLAM keyframe trajectories in sequences 02, 03, 04 ,06, 08, 09 and 10 from the odometry benchmark of the KITTI dataset.&#10;Sequence 08 does not contains loops and drift (especially scale) is not corrected."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(f)</span> </span><span class="ltx_text" style="font-size:80%;">Sequence 09</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F12.sf7" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x33.png" id="S8.F12.sf7.g1" class="ltx_graphics" width="149" height="117" alt="ORB-SLAM keyframe trajectories in sequences 02, 03, 04 ,06, 08, 09 and 10 from the odometry benchmark of the KITTI dataset.&#10;Sequence 08 does not contains loops and drift (especially scale) is not corrected."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(g)</span> </span><span class="ltx_text" style="font-size:80%;">Sequence 10</span></figcaption>
</figure>
</td>
</tr>
</tbody></table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Fig. 12: </span>ORB-SLAM keyframe trajectories in sequences 02, 03, 04 ,06, 08, 09 and 10 from the odometry benchmark of the KITTI dataset.
Sequence 08 does not contains loops and drift (especially scale) is not corrected.</figcaption>
</figure>
<div id="S8.SS5.p1" class="ltx_para">
<p class="ltx_p">The odometry benchmark from the KITTI dataset <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib40" title="" class="ltx_ref" target="_blank">40</a>]</cite> contains 11 sequences from a car driven around a residential area with
accurate ground truth from GPS and a Velodyne laser scanner. This is a very challenging dataset for monocular vision due to fast rotations,
areas with lot of foliage, which make more difficult data association, and relatively high car speed, being the sequences recorded at 10 fps.
We play the sequences at the real frame-rate they were recorded and ORB-SLAM is able to process
all the sequences by the exception of sequence 01 which is a highway with few trackable close objects.
Sequences 00, 02, 05, 06, 07, 09 contain loops that were correctly detected and closed by our system. Sequence 09 contains a loop that can be detected only
in a few frames at the end of the sequence, and our system not always detects it (the results provided are for the executions in which it was detected).</p>
</div>
<div id="S8.SS5.p2" class="ltx_para">
<p class="ltx_p">Qualitative comparisons of our trajectories and the ground truth are shown in Fig. <a href="#S8.F11" title="Fig. 11 ‣ VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">11</span></a> and Fig. <a href="#S8.F12" title="Fig. 12 ‣ VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">12</span></a>.
As in the TUM RGB-D benchmark we have aligned the keyframe trajectories of our system and the ground truth with a similarity transformation.
We can compare qualitatively our results from Fig. <a href="#S8.F11" title="Fig. 11 ‣ VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">11</span></a> and Fig. <a href="#S8.F12" title="Fig. 12 ‣ VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">12</span></a>
with the results provided for sequences 00, 05, 06, 07 and 08 by the recent monocular SLAM approach of Lim et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib25" title="" class="ltx_ref" target="_blank">25</a>]</cite>
in their figure 10. ORB-SLAM produces clearly more accurate trajectories for all those sequences by the exception of sequence 08 in which they seem to suffer less
drift.</p>
</div>
<div id="S8.SS5.p3" class="ltx_para">
<p class="ltx_p">Table <a href="#S8.T5" title="TABLE V ‣ VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">V</span></a>
shows the median RMSE error of the keyframe trajectory over five executions in each sequence.
We also provide the dimensions of the maps to put in context the errors.
The results demonstrate that our system is very accurate being the trajectory error typically around the 1% of its dimensions, sometimes less as in sequence 03
with an error of the 0.3% or higher as in sequence 08 with the 5%. In sequence 08 there are no loops and drift cannot be corrected, which makes clear the need
of loop closures to achieve accurate reconstructions.</p>
</div>
<figure id="S8.T5" class="ltx_table">

<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr class="ltx_tr">
<th class="ltx_td ltx_th ltx_th_column ltx_border_r" colspan="2"/>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="2">ORB-SLAM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="2">+ Global BA (20 its.)</th>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t">Sequence</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:37.0pt;">
<p class="ltx_p ltx_align_center">Dimension</p>
<p class="ltx_p ltx_align_center">(m<span id="S8.T5.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\times"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span></span></span></span></span></span>m)</p>
</div>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">KFs</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">RMSE</p>
<p class="ltx_p ltx_align_center">(m)</p>
</div>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:28.5pt;">
<p class="ltx_p ltx_align_center">RMSE</p>
<p class="ltx_p ltx_align_center">(m)</p>
</div>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">
<div class="ltx_block ltx_parbox ltx_align_middle" style="width:31.3pt;">
<p class="ltx_p">Time BA</p>
<p class="ltx_p">(s)</p>
</div>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_tt">KITTI 00</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt"><span id="S8.T5.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="564\times 496"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">564</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">496</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">1391</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">6.68</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">5.33</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">24.83</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">KITTI 01</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span id="S8.T5.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="1157\times 1827"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1157</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1827</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">X</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">KITTI 02</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span id="S8.T5.m4" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="599\times 946"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">599</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">946</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1801</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">21.75</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">21.28</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">30.07</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">KITTI 03</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span id="S8.T5.m5" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="471\times 199"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">471</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">199</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">250</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.59</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.51</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">4.88</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">KITTI 04</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span id="S8.T5.m6" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="0.5\times 394"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0.5</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">394</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">108</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.79</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.62</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1.58</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">KITTI 05</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span id="S8.T5.m7" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="479\times 426"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">479</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">426</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">820</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">8.23</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">4.85</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">15.20</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">KITTI 06</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span id="S8.T5.m8" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="23\times 457"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">23</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">457</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">373</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">14.68</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">12.34</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">7.78</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">KITTI 07</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span id="S8.T5.m9" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="191\times 209"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">191</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">209</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">351</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">3.36</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">2.26</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">6.28</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">KITTI 08</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span id="S8.T5.m10" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="808\times 391"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">808</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">391</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1473</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">46.58</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">46.68</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">25.60</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">KITTI 09</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span id="S8.T5.m11" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="465\times 568"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">465</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">568</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">653</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">7.62</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">6.62</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">11.33</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_l ltx_border_r ltx_border_t">KITTI 10</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t"><span id="S8.T5.m12" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="671\times 177"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">671</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">177</span></span></span></span></span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">411</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">8.68</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">8.80</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">7.64</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">TABLE V: </span>Results of our system in the KITTI dataset.</figcaption></figure>
<div id="S8.SS5.p4" class="ltx_para">
<p class="ltx_p">In this experiment we have also checked how much the reconstruction can be improved by performing
20 iterations of <em class="ltx_emph ltx_font_italic">full BA</em>, see the Appendix for details, at the end of each sequence.
We have noticed that some iterations of <em class="ltx_emph ltx_font_italic">full BA</em> slightly improves the accuracy
in the trajectories with loops but it has negligible effect in open trajectories, which means that the output of our system is already
very accurate. In any case if the most accurate results are needed our algorithm provides
a set of matches, which define a strong camera network, and an initial guess, so that <em class="ltx_emph ltx_font_italic">full BA</em> converge in few iterations.</p>
</div>
<div id="S8.SS5.p5" class="ltx_para">
<p class="ltx_p">Finally we wanted to show the efficacy of our loop closing approach and the influence of the <span id="S8.SS5.p5.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\theta_{\mathrm{min}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">θ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">m</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">n</span></span></span></span></span></span></span></span></span></span></span></span></span> used
to include edges in the essential graph. We have selected the sequence 09 (a very long sequence with a loop closure at the end), and in the same execution
we have evaluated different loop closing strategies. In table <a href="#S8.T6" title="TABLE VI ‣ VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VI</span></a> we show the keyframe trajectory RMSE and the time spent in the optimization in different cases:
without loop closing, if we directly apply a <em class="ltx_emph ltx_font_italic">full BA</em> (20 or 100 iterations), if we apply only pose graph optimization (10 iterations with different number of edges)
and if we apply pose graph optimization and <em class="ltx_emph ltx_font_italic">full BA</em> afterwards. The results clearly show that before loop closure, the solution is so far from the optimal, that BA has convergence problems. Even after
100 iterations still the error is very high. On the other hand essential graph optimization shows fast convergence and more accurate results.
It can be seen that the choice of <span id="S8.SS5.p5.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\theta_{\mathrm{min}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">θ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">m</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">n</span></span></span></span></span></span></span></span></span></span></span></span></span> has not significant effect in accuracy but decreasing the number of edges the time can be significantly reduced.
Performing an additional BA after the pose graph optimization slightly improves the accuracy while increasing substantially the time.</p>
</div>
<figure id="S8.T6" class="ltx_table">

<table class="ltx_tabular ltx_align_left ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr class="ltx_tr">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t">Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">Time (s)</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">Pose Graph Edges</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">RMSE (m)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_tt">-</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">-</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">-</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt">48.77</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">BA (20)</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">14.64</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">-</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">49.90</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">BA (100)</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">72.16</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">-</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">18.82</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">EG (200)</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.38</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">890</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">8.84</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">EG (100)</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.48</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1979</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">8.36</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">EG (50)</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.59</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">3583</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">8.95</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">EG (15)</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.94</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">6663</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">8.88</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_l ltx_border_r ltx_border_t">EG (100) + BA (20)</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">13.40</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">1979</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">7.22</td>
</tr>
</tbody>
</table>
<p class="ltx_p ltx_align_left">First row shows results without loop closing. Number between brackets for BA (Bundle Adjustment) means number of Levenberg-Marquardt (LM) iterations, while for EG (Essential Graph) is the <span id="S8.T6.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\theta_{\mathrm{min}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">θ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">m</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">n</span></span></span></span></span></span></span></span></span></span></span></span></span> to build the Essential Graph.
All EG optimizations perform 10 LM iterations.</p>
<figcaption class="ltx_caption ltx_align_left"><span class="ltx_tag ltx_tag_table">TABLE VI: </span>Comparison of loop closing strategies in KITTI 09</figcaption></figure>
<figure id="S8.F13" class="ltx_figure">
<table style="width:100%;">
<tbody><tr>
<td class="ltx_subfigure">
<figure id="S8.F13.sf1" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x34.png" id="S8.F13.sf1.g1" class="ltx_graphics" width="148" height="113" alt="Comparison of different loop closing strategies in KITTI 09."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(a)</span> </span><span class="ltx_text" style="font-size:80%;">Without Loop Closing</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F13.sf2" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x35.png" id="S8.F13.sf2.g1" class="ltx_graphics" width="148" height="113" alt="Comparison of different loop closing strategies in KITTI 09."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(b)</span> </span><span class="ltx_text" style="font-size:80%;">BA (20)</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F13.sf3" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x36.png" id="S8.F13.sf3.g1" class="ltx_graphics" width="148" height="113" alt="Comparison of different loop closing strategies in KITTI 09."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(c)</span> </span><span class="ltx_text" style="font-size:80%;">EG (100)</span></figcaption>
</figure>
</td>
<td class="ltx_subfigure">
<figure id="S8.F13.sf4" class="ltx_figure ltx_align_center"><img src="https://media.arxiv-vanity.com/render-output/5535659/x37.png" id="S8.F13.sf4.g1" class="ltx_graphics" width="148" height="113" alt="Comparison of different loop closing strategies in KITTI 09."/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" style="font-size:80%;">(d)</span> </span><span class="ltx_text" style="font-size:80%;">EG (100) + BA (20)</span></figcaption>
</figure>
</td>
</tr>
</tbody></table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Fig. 13: </span>Comparison of different loop closing strategies in KITTI 09.</figcaption>
</figure>
</section>
</section>
<section id="S9" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">Ix </span><span class="ltx_text ltx_font_smallcaps">Conclusions and Discussion</span>
</h2>

<section id="S9.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Ix-a </span><span class="ltx_text ltx_font_italic">Conclusions</span>
</h3>

<div id="S9.SS1.p1" class="ltx_para">
<p class="ltx_p">In this work we have presented a new monocular SLAM system with a detailed description of its building blocks and an
exhaustive evaluation in public datasets. Our system has demonstrated that it can process sequences from indoor and outdoor
scenes and from car, robot and hand-held motions. The accuracy of the system is typically below 1 cm in small indoor scenarios and of a few meters
in large outdoor scenarios (once we have aligned the scale with the ground truth).</p>
</div>
<div id="S9.SS1.p2" class="ltx_para">
<p class="ltx_p">Currently PTAM by Klein and Murray <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref" target="_blank">4</a>]</cite> is considered the most accurate SLAM method from monocular video in real time.
It is not coincidence that the backend of PTAM is bundle adjustment, which is well known to be
the gold standard method for the offline Structure From Motion problem <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref" target="_blank">2</a>]</cite>. One of the main successes of PTAM, and the earlier work of Mouragnon <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref" target="_blank">3</a>]</cite>, was
to bring that knowledge into the robotics SLAM community and demonstrate its real time performance. The main contribution
of our work is to expand the versatility of PTAM to environments that are intractable for that system. To achieve this, we have designed from scratch a new monocular SLAM system
with some new ideas and algorithms, but also incorporating excellent works developed in the past few years, such as
the loop detection of Gálvez-López and Tardós <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref" target="_blank">5</a>]</cite>, the loop closing procedure and covisibility graph of Strasdat et.al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref" target="_blank">7</a>, <a href="#bib.bib6" title="" class="ltx_ref" target="_blank">6</a>]</cite>,
the optimization framework g2o by Kuemmerle et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib37" title="" class="ltx_ref" target="_blank">37</a>]</cite> and ORB features by Rubble et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref" target="_blank">9</a>]</cite>. To the best of our knowledge,
no other system has demonstrated to work in as many different scenarios and with such accuracy. Therefore our system is currently the most reliable and complete
solution for monocular SLAM. Our novel policy to spawn and cull keyframes, permits to create keyframes every few frames, which are eventually removed when considered redundant.
This flexible map expansion is really useful in poorly conditioned exploration
trajectories, i.e. close to pure rotations or fast movements. When operating repeatedly in the same environment, the map only grows if the visual content of the scene changes, storing a history of its different visual appearances.
Interesting results for long-term mapping could be extracted analyzing this history.</p>
</div>
<div id="S9.SS1.p3" class="ltx_para">
<p class="ltx_p">Finally we have also demonstrated that ORB features have enough recognition power to enable place recognition from severe viewpoint change. Moreover they are so fast to extract
and match (without the need of multi-threading or GPU acceleration) that enable real time accurate tracking and mapping.</p>
</div>
</section>
<section id="S9.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Ix-B </span><span class="ltx_text ltx_font_italic">Sparse/Feature-based vs. Dense/Direct Methods</span>
</h3>

<div id="S9.SS2.p1" class="ltx_para">
<p class="ltx_p">Recent real-time monocular SLAM algorithms such as DTAM <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib44" title="" class="ltx_ref" target="_blank">44</a>]</cite> and LSD-SLAM <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref" target="_blank">10</a>]</cite> are able to perform dense or semi dense
reconstructions of the environment, while the camera is localized by optimizing directly over image pixel intensities. These direct approaches do not need
feature extraction and thus avoid the corresponding artifacts. They are also more robust to blur, low-texture environments and high-frequency texture like asphalt <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib45" title="" class="ltx_ref" target="_blank">45</a>]</cite>. Their denser reconstructions, as compared to the sparse point map of our system or PTAM, could be more useful for other tasks than just camera localization.</p>
</div>
<div id="S9.SS2.p2" class="ltx_para">
<p class="ltx_p">However, direct methods have their own limitations. Firstly, these methods assume a surface reflectance model that in real scenes
produces its own artifacts. The photometric consistency limits the baseline of the matches, typically narrower than those that features allow.
This has a great impact in reconstruction accuracy, which requires wide baseline observations to reduce depth uncertainty.
Direct methods, if not correctly modeled, are quite affected by rolling-shutter, auto-gain and auto-exposure artifacts (as in the TUM RGB-D Benchmark).
Finally, because direct methods are in general very computationally demanding, the map is just incrementally expanded as in DTAM, or map optimization is reduced to
a pose graph, discarding all sensor measurements as in LSD-SLAM.</p>
</div>
<div id="S9.SS2.p3" class="ltx_para">
<p class="ltx_p">In contrast, feature-based methods are able to match features with a wide baseline, thanks to their good invariance to viewpoint and illumination changes. Bundle adjustment jointly optimizes
camera poses and points over sensor measurements. In the context of structure and motion estimation, Torr and Zisserman <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib46" title="" class="ltx_ref" target="_blank">46</a>]</cite> already pointed the benefits
of feature-based against direct methods. In this work we provide experimental evidence (see Section <a href="#S8.SS2" title="VIII-B Localization Accuracy in the TUM RGB-D Benchmark ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VIII-B</span></a>) of the superior accuracy of feature-based methods
in real-time SLAM. We consider that the future of monocular SLAM should incorporate the best of both approaches.</p>
</div>
</section>
<section id="S9.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">Ix-C </span><span class="ltx_text ltx_font_italic">Future Work</span>
</h3>

<div id="S9.SS3.p1" class="ltx_para">
<p class="ltx_p">The accuracy of our system can still be improved incorporating points at infinity in the tracking. These points, which are not seen with sufficient
parallax and our system does not include in the map, are very informative of the rotation of the camera <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref" target="_blank">21</a>]</cite>.</p>
</div>
<div id="S9.SS3.p2" class="ltx_para">
<p class="ltx_p">Another open way is to upgrade the sparse map of our system to a denser and more useful reconstruction. Thanks to our keyframe selection,
keyframes comprise a compact summary of the environment with a very high pose accuracy and rich information of covisibility.
Therefore the ORB-SLAM sparse map can be an excellent initial guess and skeleton, on top of which a dense and accurate map of the scene can be built.
A first effort in this line is presented in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib47" title="" class="ltx_ref" target="_blank">47</a>]</cite>.</p>
</div>
<div id="S9.SS3.p3" class="ltx_para">
<p class="ltx_p">[Non-Linear Optimizations]</p>
</div>
<div id="S9.SS3.p4" class="ltx_para">
<ul id="A0.I1" class="ltx_itemize">
<li id="A0.I1.i1" class="ltx_item">
<div id="A0.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Bundle Adjustment (BA) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref" target="_blank">1</a>]</cite>:</p>
</div>
<div id="A0.I1.i1.p2" class="ltx_para">
<p class="ltx_p">Map point 3D locations <span id="A0.I1.i1.p2.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{X}_{w,j}\in\mathbb{R}^{3}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">X</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">∈</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-ams-R" style="padding-top: 0.446em; padding-bottom: 0.298em;">R</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.615em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">3</span></span></span></span></span></span></span></span></span></span></span> and keyframe poses <span id="A0.I1.i1.p2.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{T}_{iw}\in\mathrm{SE}(3)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">T</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">∈</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">S</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">E</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">3</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span>, where <span id="A0.I1.i1.p2.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="w"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span></span></span></span></span></span> stands for the world reference, are optimized minimizing the reprojection error with respect to the matched
keypoints <span id="A0.I1.i1.p2.m4" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{x}_{i,j}\in\mathbb{R}^{2}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">x</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">∈</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-ams-R" style="padding-top: 0.446em; padding-bottom: 0.298em;">R</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.615em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span></span></span></span>. The error term for the observation of a map point <span id="A0.I1.i1.p2.m5" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="j"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span> in a keyframe <span id="A0.I1.i1.p2.m6" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is:</p>
<div class="ltx_engrafo_equation_container"><table id="A0.E5" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="A0.E5.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"><span class="mjx-chtml MJXc-display" style="text-align: left;"><span class="mjx-math" aria-label=" \mathbf{e}_{i,j}=\mathbf{x}_{i,j}-\pi_{i}(\mathbf{T}_{iw},\mathbf{X}_{w,j}) "><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">x</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-msubsup MJXc-space2"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em; padding-right: 0.003em;">π</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">T</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">X</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr>
</tbody></table></div>
<p class="ltx_p">where <span id="A0.I1.i1.p2.m7" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\pi_{i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em; padding-right: 0.003em;">π</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> is the projection function:</p>
<div class="ltx_engrafo_equation_container"><table id="A0.E6" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="A0.E6.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"/></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr>
</tbody></table></div>
<p class="ltx_p">where <span id="A0.I1.i1.p2.m8" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{R}_{iw}\in\mathrm{SO}(3)"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">R</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">∈</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">S</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">O</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">3</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span> and <span id="A0.I1.i1.p2.m9" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{t}_{iw}\in\mathbb{R}^{3}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.298em; padding-bottom: 0.372em;">t</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">∈</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-ams-R" style="padding-top: 0.446em; padding-bottom: 0.298em;">R</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.615em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">3</span></span></span></span></span></span></span></span></span></span></span> are respectively the rotation and translation parts of <span id="A0.I1.i1.p2.m10" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{T}_{iw}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">T</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span></span></span></span></span></span></span></span></span></span>, and <span id="A0.I1.i1.p2.m11" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="(f_{i,u},f_{i,v})"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.06em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">u</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base" style="margin-right: -0.06em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">v</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span> and <span id="A0.I1.i1.p2.m12" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="(c_{i,u},c_{i,v})"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">u</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">c</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">v</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span> are the focal
length and principle point associated to camera <span id="A0.I1.i1.p2.m13" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="i"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>. The cost function to
be minimized is:</p>
<div class="ltx_engrafo_equation_container"><table id="A0.E7" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="A0.E7.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"><span class="mjx-chtml MJXc-display" style="text-align: left;"><span class="mjx-math" aria-label=" C=\sum_{i,j}\rho_{h}(\mathbf{e}_{i,j}^{T}\mathbf{\Omega}^{-1}_{i,j}\mathbf{e}_%&#10;{i,j}) "><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-munderover MJXc-space3"><span class="mjx-itable"><span class="mjx-row"><span class="mjx-cell"><span class="mjx-op"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size2-R" style="padding-top: 0.74em; padding-bottom: 0.74em;">∑</span></span></span></span></span><span class="mjx-row"><span class="mjx-under" style="font-size: 70.7%; padding-top: 0.236em; padding-bottom: 0.141em; padding-left: 0.504em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.519em;">ρ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">h</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.311em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">Ω</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.293em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7)</span></td>
</tr>
</tbody></table></div>
<p class="ltx_p">where <span id="A0.I1.i1.p2.m14" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\rho_{h}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.519em;">ρ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">h</span></span></span></span></span></span></span></span></span></span></span> is the Huber robust cost function and <span id="A0.I1.i1.p2.m15" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{\Omega}_{i,j}=\sigma_{i,j}^{2}\mathbf{I}_{2\times 2}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">Ω</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base" style="margin-right: -0.001em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em; padding-right: 0.001em;">σ</span></span></span><span class="mjx-stack" style="vertical-align: -0.311em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0.073em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">I</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.298em;">×</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span></span></span></span> is the covariance matrix
associated to the scale at which the keypoint was detected.
In case of <em class="ltx_emph ltx_font_italic">full BA</em> (used in the map initialization explained in Section <a href="#S4" title="IV Automatic Map Initialization ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">IV</span></a> and in the experiments in Section <a href="#S8.SS5" title="VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VIII-E</span></a>) we optimize all points and keyframes, by the exception of the first keyframe which remain fixed as the origin.
In <em class="ltx_emph ltx_font_italic">local BA</em> (see section <a href="#S6.SS4" title="VI-D Local Bundle Adjustment ‣ VI Local Mapping ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VI-D</span></a>) all points included in the local area are optimized, while a
subset of keyframes is fixed. In pose optimization, or <em class="ltx_emph ltx_font_italic">motion-only BA</em>, (see section <a href="#S5" title="V Tracking ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">V</span></a>) all points are fixed and only the camera pose is optimized.</p>
</div>
</li>
<li id="A0.I1.i2" class="ltx_item">
<div id="A0.I1.i2.p1" class="ltx_para">
<p class="ltx_p">Pose Graph Optimization over Sim(3) Constraints <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref" target="_blank">6</a>]</cite>:</p>
</div>
<div id="A0.I1.i2.p2" class="ltx_para">
<p class="ltx_p">Given a pose graph of binary edges (see Section <a href="#S7.SS4" title="VII-D Essential Graph Optimization ‣ VII Loop Closing ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VII-D</span></a>) we define the error in an edge as:</p>
<div class="ltx_engrafo_equation_container"><table id="A0.E8" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="A0.E8.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"><span class="mjx-chtml MJXc-display" style="text-align: left;"><span class="mjx-math" aria-label=" \mathbf{e}_{i,j}=\log_{\mathrm{Sim}(3)}(\mathbf{S}_{ij}\,\mathbf{S}_{jw}\,%&#10;\mathbf{S}^{-1}_{iw}) "><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.519em;">log</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.377em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">S</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.151em; padding-bottom: 0.372em;">m</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">3</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char"/></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mspace" style="width: 0.167em; height: 0px;"/><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span></span></span></span></span><span class="mjx-mspace" style="width: 0.167em; height: 0px;"/><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.292em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">w</span></span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(8)</span></td>
</tr>
</tbody></table></div>
<p class="ltx_p">where <span id="A0.I1.i2.p2.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{S}_{ij}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span></span></span></span></span> is the relative Sim(3) transformation between both keyframes computed from the SE(3) poses just before the pose graph optimization and setting the scale factor to 1.
In the case of the loop closure edge this relative transformation is computed with the method of Horn <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib42" title="" class="ltx_ref" target="_blank">42</a>]</cite>. The <span id="A0.I1.i2.p2.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\log_{\text{Sim3}}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.519em;">log</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.377em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.519em; padding-bottom: 0.225em;"><span class="mjx-charbox MJXc-font-inherit" style="font-size: 100%; padding-bottom: 0.3em; width: 2em;">Sim3</span></span></span></span></span></span></span></span></span></span></span></span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib48" title="" class="ltx_ref" target="_blank">48</a>]</cite> transforms to the tangent
space, so that the error is a vector in <span id="A0.I1.i2.p2.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbb{R}^{7}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-ams-R" style="padding-top: 0.446em; padding-bottom: 0.298em;">R</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.615em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">7</span></span></span></span></span></span></span></span></span></span></span>.
The goal is to optimize the Sim(3) keyframe poses minimizing
the cost function:</p>
<div class="ltx_engrafo_equation_container"><table id="A0.E9" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="A0.E9.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"><span class="mjx-chtml MJXc-display" style="text-align: left;"><span class="mjx-math" aria-label=" C=\sum_{i,j}(\mathbf{e}_{i,j}^{T}\mathbf{\Lambda}_{i,j}\mathbf{e}_{i,j}) "><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-munderover MJXc-space3"><span class="mjx-itable"><span class="mjx-row"><span class="mjx-cell"><span class="mjx-op"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size2-R" style="padding-top: 0.74em; padding-bottom: 0.74em;">∑</span></span></span></span></span><span class="mjx-row"><span class="mjx-under" style="font-size: 70.7%; padding-top: 0.236em; padding-bottom: 0.141em; padding-left: 0.504em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.311em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">Λ</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(9)</span></td>
</tr>
</tbody></table></div>
<p class="ltx_p">where <span id="A0.I1.i2.p2.m4" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{\Lambda}_{i,j}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">Λ</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span></span></span></span></span> is the information matrix of the edge, which, as in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib48" title="" class="ltx_ref" target="_blank">48</a>]</cite>, we set to the identity. We fix the loop closure keyframe to fix the 7 degrees of gauge freedom.
Although this method is a rough approximation of a <em class="ltx_emph ltx_font_italic">full BA</em>, we demonstrate experimentally in Section <a href="#S8.SS5" title="VIII-E Large Scale and Large Loop Closing in the KITTI Dataset ‣ VIII Experiments ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VIII-E</span></a> that it has significantly faster and
better convergence than BA.</p>
</div>
</li>
<li id="A0.I1.i3" class="ltx_item">
<div id="A0.I1.i3.p1" class="ltx_para">
<p class="ltx_p">Relative Sim(3) Optimization:</p>
</div>
<div id="A0.I1.i3.p2" class="ltx_para">
<p class="ltx_p">Given a set of <span id="A0.I1.i3.p2.m1" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="n"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span> matches <span id="A0.I1.i3.p2.m2" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="i\Rightarrow j"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">⇒</span></span><span class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span> (keypoints and their associated 3D map points) between keyframe <span id="A0.I1.i3.p2.m3" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span> and keyframe <span id="A0.I1.i3.p2.m4" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="2"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>, we want to optimize the
relative Sim(3) transformation <span id="A0.I1.i3.p2.m5" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{S}_{12}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">12</span></span></span></span></span></span></span></span></span></span></span> (see Section <a href="#S7.SS2" title="VII-B Compute the Similarity Transformation ‣ VII Loop Closing ‣ ORB-SLAM: a Versatile and Accurate Monocular SLAM System" class="ltx_ref" target="_blank"><span class="ltx_text ltx_ref_tag">VII-B</span></a>) that minimizes the reprojection error in both images:</p>
<div class="ltx_engrafo_equation_container"><table id="A0.E10" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="A0.E10.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"><span class="mjx-chtml MJXc-display" style="text-align: left;"><span class="mjx-math" aria-label=" \begin{gathered}\displaystyle\mathbf{e_{1}}=\mathbf{x}_{1,i}-\pi_{1}(\mathbf{S%&#10;}_{12},\mathbf{X}_{2,j})\\&#10;\displaystyle\mathbf{e_{2}}=\mathbf{x}_{2,j}-\pi_{2}(\mathbf{S}^{-1}_{12},%&#10;\mathbf{X}_{1,i})\end{gathered} "><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mtable" style="vertical-align: -1.081em; padding: 0px 0.167em;"><span class="mjx-table"><span class="mjx-mtr" style="height: 1.262em;"><span class="mjx-mtd" style="padding: 0px 0px 0px 0px; width: 10.467em;"><span class="mjx-mrow" style="margin-top: -0.2em;"><span class="mjx-mstyle"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">x</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-msubsup MJXc-space2"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em; padding-right: 0.003em;">π</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">12</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">X</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span><span class="mjx-strut"/></span></span></span><span class="mjx-mtr" style="height: 1.401em;"><span class="mjx-mtd" style="padding: 0.15em 0px 0px 0px;"><span class="mjx-mrow" style="margin-top: -0.062em;"><span class="mjx-mstyle"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-msubsup MJXc-space3"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">x</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-msubsup MJXc-space2"><span class="mjx-base" style="margin-right: -0.003em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em; padding-right: 0.003em;">π</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">S</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.295em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">12</span></span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">X</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span><span class="mjx-strut"/></span></span></span></span></span></span></span></span></span></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(10)</span></td>
</tr>
</tbody></table></div>
<p class="ltx_p">and the cost function to minimize is:</p>
<div class="ltx_engrafo_equation_container"><table id="A0.E11" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"/>
<td class="ltx_eqn_cell ltx_align_center"><span id="A0.E11.m1" class="ltx_DisplayMath"><span class="mjpage mjpage__block"><span class="mjx-chtml MJXc-display" style="text-align: left;"><span class="mjx-math" aria-label=" C=\sum_{n}\big{(}\rho_{h}(\mathbf{e}^{T}_{1}\mathbf{\Omega}^{-1}_{1,i}\mathbf{%&#10;e}_{1})+\rho_{h}(\mathbf{e}^{T}_{2}\mathbf{\Omega}^{-1}_{2,j}\mathbf{e}_{2})%&#10;\big{)} "><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.077em; padding-bottom: 0.298em;">=</span></span><span class="mjx-munderover MJXc-space3"><span class="mjx-itable"><span class="mjx-row"><span class="mjx-cell"><span class="mjx-op"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size2-R" style="padding-top: 0.74em; padding-bottom: 0.74em;">∑</span></span></span></span></span><span class="mjx-row"><span class="mjx-under" style="font-size: 70.7%; padding-top: 0.236em; padding-bottom: 0.141em; padding-left: 0.721em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span><span class="mjx-mstyle MJXc-space1"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size1-R" style="padding-top: 0.593em; padding-bottom: 0.593em;">(</span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.519em;">ρ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">h</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.315em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">Ω</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.296em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">+</span></span><span class="mjx-msubsup MJXc-space2"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.519em;">ρ</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">h</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.315em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">Ω</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.296em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.151em; padding-bottom: 0.372em;">e</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span><span class="mjx-mstyle"><span class="mjx-mrow"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-size1-R" style="padding-top: 0.593em; padding-bottom: 0.593em;">)</span></span></span></span></span></span></span></span></span></span></span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(11)</span></td>
</tr>
</tbody></table></div>
<p class="ltx_p">where <span id="A0.I1.i3.p2.m6" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{\Omega}_{1,i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">Ω</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> and <span id="A0.I1.i3.p2.m7" class="ltx_Math"><span class="mjpage"><span class="mjx-chtml"><span class="mjx-math" aria-label="\mathbf{\Omega}_{2,i}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.372em; padding-bottom: 0.372em;">Ω</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom" style=""><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span></span> are the covariance matrices associated to the scale in which keypoints in image 1 and image 2 were detected.
In this optimization the points are fixed.</p>
</div>
</li>
</ul>
</div>
</section>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
B. Triggs, P. F. McLauchlan, R. I. Hartley, and A. W. Fitzgibbon, “Bundle
adjustment — a modern synthesis,” in <em class="ltx_emph ltx_font_italic">Vision algorithms: theory and
practice</em>, 2000, pp. 298–372.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
R. Hartley and A. Zisserman, <em class="ltx_emph ltx_font_italic">Multiple View Geometry in Computer Vision</em>,
2nd ed.   Cambridge University Press,
2004.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
E. Mouragnon, M. Lhuillier, M. Dhome, F. Dekeyser, and P. Sayd, “Real time
localization and 3d reconstruction,” in <em class="ltx_emph ltx_font_italic">Computer Vision and Pattern
Recognition, 2006 IEEE Computer Society Conference on</em>, vol. 1, 2006, pp.
363–370.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
G. Klein and D. Murray, “Parallel tracking and mapping for small AR
workspaces,” in <em class="ltx_emph ltx_font_italic">IEEE and ACM International Symposium on Mixed and
Augmented Reality (ISMAR)</em>, Nara, Japan, November 2007, pp. 225–234.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
D. Gálvez-López and J. D. Tardós, “Bags of binary words for fast place
recognition in image sequences,” <em class="ltx_emph ltx_font_italic">IEEE Transactions on Robotics</em>,
vol. 28, no. 5, pp. 1188–1197, 2012.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
H. Strasdat, J. M. M. Montiel, and A. J. Davison, “Scale drift-aware large
scale monocular SLAM.” in <em class="ltx_emph ltx_font_italic">Robotics: Science and Systems (RSS)</em>,
Zaragoza, Spain, June 2010.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
H. Strasdat, A. J. Davison, J. M. M. Montiel, and K. Konolige, “Double window
optimisation for constant time visual SLAM,” in <em class="ltx_emph ltx_font_italic">IEEE International
Conference on Computer Vision (ICCV)</em>, Barcelona, Spain, November 2011, pp.
2352–2359.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
C. Mei, G. Sibley, and P. Newman, “Closing loops without places,” in
<em class="ltx_emph ltx_font_italic">IEEE/RSJ International Conference on Intelligent Robots and Systems
(IROS)</em>, Taipei, Taiwan, October 2010, pp. 3738–3744.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
E. Rublee, V. Rabaud, K. Konolige, and G. Bradski, “ORB: an efficient
alternative to SIFT or SURF,” in <em class="ltx_emph ltx_font_italic">IEEE International Conference on
Computer Vision (ICCV)</em>, Barcelona, Spain, November 2011, pp. 2564–2571.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
J. Engel, T. Schöps, and D. Cremers, “LSD-SLAM: Large-scale direct
monocular SLAM,” in <em class="ltx_emph ltx_font_italic">European Conference on Computer Vision (ECCV)</em>,
Zurich, Switzerland, September 2014, pp. 834–849.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
R. Mur-Artal and J. D. Tardós, “Fast relocalisation and loop closing in
keyframe-based SLAM,” in <em class="ltx_emph ltx_font_italic">IEEE International Conference on Robotics
and Automation (ICRA)</em>, Hong Kong, China, June 2014, pp. 846–853.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
——, “ORB-SLAM: Tracking and mapping recognizable features,” in
<em class="ltx_emph ltx_font_italic">MVIGRO Workshop at Robotics Science and Systems (RSS)</em>, Berkeley, USA,
July 2014.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
B. Williams, M. Cummins, J. Neira, P. Newman, I. Reid, and J. D. Tardós,
“A comparison of loop closing techniques in monocular SLAM,”
<em class="ltx_emph ltx_font_italic">Robotics and Autonomous Systems</em>, vol. 57, no. 12, pp. 1188–1197,
2009.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
D. Nister and H. Stewenius, “Scalable recognition with a vocabulary tree,” in
<em class="ltx_emph ltx_font_italic">IEEE Computer Society Conference on Computer Vision and Pattern
Recognition (CVPR)</em>, vol. 2, New York City, USA, June 2006, pp. 2161–2168.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
M. Cummins and P. Newman, “Appearance-only SLAM at large scale with
FAB-MAP 2.0,” <em class="ltx_emph ltx_font_italic">The International Journal of Robotics Research</em>,
vol. 30, no. 9, pp. 1100–1123, 2011.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
M. Calonder, V. Lepetit, C. Strecha, and P. Fua, “BRIEF: Binary Robust
Independent Elementary Features,” in <em class="ltx_emph ltx_font_italic">European Conference on
Computer Vision (ECCV)</em>, Hersonissos, Greece, September 2010, pp. 778–792.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
E. Rosten and T. Drummond, “Machine learning for high-speed corner
detection,” in <em class="ltx_emph ltx_font_italic">European Conference on Computer Vision (ECCV)</em>, Graz,
Austria, May 2006, pp. 430–443.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
H. Bay, T. Tuytelaars, and L. Van Gool, “SURF: Speeded Up Robust
Features,” in <em class="ltx_emph ltx_font_italic">European Conference on Computer Vision (ECCV)</em>, Graz,
Austria, May 2006, pp. 404–417.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
D. G. Lowe, “Distinctive image features from scale-invariant keypoints,”
<em class="ltx_emph ltx_font_italic">International Journal of Computer Vision</em>, vol. 60, no. 2, pp. 91–110,
2004.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
A. J. Davison, I. D. Reid, N. D. Molton, and O. Stasse, “MonoSLAM:
Real-time single camera SLAM,” <em class="ltx_emph ltx_font_italic">IEEE Transactions on Pattern
Analysis and Machine Intelligence</em>, vol. 29, no. 6, pp. 1052–1067, 2007.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
J. Civera, A. J. Davison, and J. M. M. Montiel, “Inverse depth parametrization
for monocular SLAM,” <em class="ltx_emph ltx_font_italic">IEEE Transactions on Robotics</em>, vol. 24, no. 5,
pp. 932–945, 2008.

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
C. Forster, M. Pizzoli, and D. Scaramuzza, “SVO: Fast semi-direct monocular
visual odometry,” in <em class="ltx_emph ltx_font_italic">Proc. IEEE Intl. Conf. on Robotics and
Automation</em>, Hong Kong, China, June 2014, pp. 15–22.

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
O. D. Faugeras and F. Lustman, “Motion and structure from motion in a
piecewise planar environment,” <em class="ltx_emph ltx_font_italic">International Journal of Pattern
Recognition and Artificial Intelligence</em>, vol. 2, no. 03, pp. 485–508, 1988.

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
W. Tan, H. Liu, Z. Dong, G. Zhang, and H. Bao, “Robust monocular SLAM in
dynamic environments,” in <em class="ltx_emph ltx_font_italic">IEEE International Symposium on Mixed and
Augmented Reality (ISMAR)</em>, Adelaide, Australia, October 2013, pp. 209–218.

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
H. Lim, J. Lim, and H. J. Kim, “Real-time 6-DOF monocular visual SLAM in a
large-scale environment,” in <em class="ltx_emph ltx_font_italic">IEEE International Conference on Robotics
and Automation (ICRA)</em>, Hong Kong, China, June 2014, pp. 1532–1539.

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
D. Nistér, “An efficient solution to the five-point relative pose
problem,” <em class="ltx_emph ltx_font_italic">IEEE Transactions on Pattern Analysis and Machine
Intelligence</em>, vol. 26, no. 6, pp. 756–770, 2004.

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
H. Longuet-Higgins, “The reconstruction of a plane surface from two
perspective projections,” <em class="ltx_emph ltx_font_italic">Proceedings of the Royal Society of London.
Series B. Biological Sciences</em>, vol. 227, no. 1249, pp. 399–410, 1986.

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
P. H. Torr, A. W. Fitzgibbon, and A. Zisserman, “The problem of degeneracy in
structure and motion recovery from uncalibrated image sequences,”
<em class="ltx_emph ltx_font_italic">International Journal of Computer Vision</em>, vol. 32, no. 1, pp. 27–44,
1999.

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
A. Chiuso, P. Favaro, H. Jin, and S. Soatto, “Structure from motion causally
integrated over time,” <em class="ltx_emph ltx_font_italic">IEEE Transactions on Pattern Analysis and
Machine Intelligence</em>, vol. 24, no. 4, pp. 523–535, 2002.

</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
E. Eade and T. Drummond, “Scalable monocular SLAM,” in <em class="ltx_emph ltx_font_italic">IEEE Computer
Society Conference on Computer Vision and Pattern Recognition (CVPR)</em>,
vol. 1, New York City, USA, June 2006, pp. 469–476.

</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
H. Strasdat, J. M. M. Montiel, and A. J. Davison, “Visual SLAM: Why
filter?” <em class="ltx_emph ltx_font_italic">Image and Vision Computing</em>, vol. 30, no. 2, pp. 65–77,
2012.

</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
G. Klein and D. Murray, “Improving the agility of keyframe-based slam,” in
<em class="ltx_emph ltx_font_italic">European Conference on Computer Vision (ECCV)</em>, Marseille, France,
October 2008, pp. 802–815.

</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
K. Pirker, M. Ruther, and H. Bischof, “CD SLAM-continuous localization and
mapping in a dynamic world,” in <em class="ltx_emph ltx_font_italic">IEEE/RSJ International Conference on
Intelligent Robots and Systems (IROS)</em>, San Francisco, USA, September 2011,
pp. 3990–3997.

</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
S. Song, M. Chandraker, and C. C. Guest, “Parallel, real-time monocular visual
odometry,” in <em class="ltx_emph ltx_font_italic">IEEE International Conference on Robotics and Automation
(ICRA)</em>, 2013, pp. 4698–4705.

</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
P. F. Alcantarilla, J. Nuevo, and A. Bartoli, “Fast explicit diffusion for
accelerated features in nonlinear scale spaces,” in <em class="ltx_emph ltx_font_italic">British Machine
Vision Conference (BMVC)</em>, Bristol, UK, 2013.

</span>
</li>
<li id="bib.bib36" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock">
X. Yang and K.-T. Cheng, “LDB: An ultra-fast feature for scalable augmented
reality on mobile devices,” in <em class="ltx_emph ltx_font_italic">IEEE International Symposium on Mixed
and Augmented Reality (ISMAR)</em>, 2012, pp. 49–57.

</span>
</li>
<li id="bib.bib37" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock">
R. Kuemmerle, G. Grisetti, H. Strasdat, K. Konolige, and W. Burgard, “g2o: A
general framework for graph optimization,” in <em class="ltx_emph ltx_font_italic">IEEE International
Conference on Robotics and Automation (ICRA)</em>, Shanghai, China, May 2011, pp.
3607–3613.

</span>
</li>
<li id="bib.bib38" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock">
J. Sturm, N. Engelhard, F. Endres, W. Burgard, and D. Cremers, “A benchmark
for the evaluation of RGB-D SLAM systems,” in <em class="ltx_emph ltx_font_italic">IEEE/RSJ International
Conference on Intelligent Robots and Systems (IROS)</em>, Vilamoura, Portugal,
October 2012, pp. 573–580.

</span>
</li>
<li id="bib.bib39" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock">
M. Smith, I. Baldwin, W. Churchill, R. Paul, and P. Newman, “The new college
vision and laser data set,” <em class="ltx_emph ltx_font_italic">The International Journal of Robotics
Research</em>, vol. 28, no. 5, pp. 595–599, 2009.

</span>
</li>
<li id="bib.bib40" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[40]</span>
<span class="ltx_bibblock">
A. Geiger, P. Lenz, C. Stiller, and R. Urtasun, “Vision meets robotics: The
KITTI dataset,” <em class="ltx_emph ltx_font_italic">The International Journal of Robotics Research</em>,
vol. 32, no. 11, pp. 1231–1237, 2013.

</span>
</li>
<li id="bib.bib41" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[41]</span>
<span class="ltx_bibblock">
V. Lepetit, F. Moreno-Noguer, and P. Fua, “EPnP: An accurate O(n) solution
to the PnP problem,” <em class="ltx_emph ltx_font_italic">International Journal of Computer Vision</em>,
vol. 81, no. 2, pp. 155–166, 2009.

</span>
</li>
<li id="bib.bib42" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[42]</span>
<span class="ltx_bibblock">
B. K. P. Horn, “Closed-form solution of absolute orientation using unit
quaternions,” <em class="ltx_emph ltx_font_italic">Journal of the Optical Society of America A</em>, vol. 4,
no. 4, pp. 629–642, 1987.

</span>
</li>
<li id="bib.bib43" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[43]</span>
<span class="ltx_bibblock">
F. Endres, J. Hess, J. Sturm, D. Cremers, and W. Burgard, “3-d mapping with an
rgb-d camera,” <em class="ltx_emph ltx_font_italic">IEEE Transactions on Robotics</em>, vol. 30, no. 1, pp.
177–187, 2014.

</span>
</li>
<li id="bib.bib44" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[44]</span>
<span class="ltx_bibblock">
R. A. Newcombe, S. J. Lovegrove, and A. J. Davison, “DTAM: Dense tracking
and mapping in real-time,” in <em class="ltx_emph ltx_font_italic">IEEE International Conference on
Computer Vision (ICCV)</em>, Barcelona, Spain, November 2011, pp. 2320–2327.

</span>
</li>
<li id="bib.bib45" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[45]</span>
<span class="ltx_bibblock">
S. Lovegrove, A. J. Davison, and J. Ibanez-Guzmán, “Accurate visual
odometry from a rear parking camera,” in <em class="ltx_emph ltx_font_italic">IEEE Intelligent Vehicles
Symposium (IV)</em>, 2011, pp. 788–793.

</span>
</li>
<li id="bib.bib46" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[46]</span>
<span class="ltx_bibblock">
P. H. Torr and A. Zisserman, “Feature based methods for structure and motion
estimation,” in <em class="ltx_emph ltx_font_italic">Vision Algorithms: Theory and Practice</em>.   Springer, 2000, pp. 278–294.

</span>
</li>
<li id="bib.bib47" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[47]</span>
<span class="ltx_bibblock">
R. Mur-Artal and J. D. Tardos, “Probabilistic semi-dense mapping from highly
accurate feature-based monocular SLAM,” in <em class="ltx_emph ltx_font_italic">Robotics: Science and
Systems (RSS)</em>, Rome, Italy, July 2015.

</span>
</li>
<li id="bib.bib48" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[48]</span>
<span class="ltx_bibblock">
H. Strasdat, “Local Accuracy and Global Consistency for Efficient Visual
SLAM,” Ph.D. dissertation, Imperial College, London, October 2012.

</span>
</li>
</ul>
</section>
<figure id="tab1" class="ltx_float biography">
<table class="ltx_tabular">
<tbody><tr class="ltx_tr">
<td class="ltx_td"><img src="https://media.arxiv-vanity.com/render-output/5535659/x38.png" id="g1" class="ltx_graphics" width="112" height="142" alt=""/></td>
<td class="ltx_td">
<p class="ltx_p">Raúl Mur Artal
was born in Zaragoza, Spain in 1989. He received the Industrial Engineering degree (mention in Industrial Automation and Robotics) in 2012 and the M.S. degree in Systems and Computer Engineering
in 2013 from the University of Zaragoza, where he is currently working towards the PhD. degree with the I3A Robotics, Perception and Real-Time Group.</p>His research interests include Visual Localization and Long-Term Mapping.</td>
</tr>
</tbody></table>
</figure>
<figure id="tab2" class="ltx_float biography">
<table class="ltx_tabular">
<tbody><tr class="ltx_tr">
<td class="ltx_td"><img src="https://media.arxiv-vanity.com/render-output/5535659/x39.png" id="g2" class="ltx_graphics" width="108" height="141" alt=""/></td>
<td class="ltx_td">
<p class="ltx_p">J. M . M. Montiel
was born in Arnedo, Spain, in 1967. He received the M.S. and Ph.D. degrees in
electrical engineering from the Universidad de Zaragoza,
Spain, in 1992 and 1996, respectively. He is currently a Full
Professor with the Departamento de
Informática e Ingeniería de Sistemas, Universidad
de Zaragoza, where he is in charge of Perception and
Computer Vision research grants and courses. His current
interests include, real-time vision localization and semantic
mapping for rigid and non rigid environments, and the
transference of this technology to robotic and nonrobotic
application domains. Prof. Martínez Montiel is a member
of the I3A Robotics, Perception, and Real-Time Group. He
has been awarded several Spanish MEC grants to fund research at the
University of Oxford, UK, and at Imperial College London, UK.</p>
</td>
</tr>
</tbody></table>
</figure>
<figure id="tab3" class="ltx_float biography">
<table class="ltx_tabular">
<tbody><tr class="ltx_tr">
<td class="ltx_td"><img src="https://media.arxiv-vanity.com/render-output/5535659/x40.png" id="g3" class="ltx_graphics" width="113" height="142" alt=""/></td>
<td class="ltx_td">
<p class="ltx_p">Juan D. Tardós
was born in Huesca, Spain, in
1961. He earned the M.S. and Ph.D. degrees in electrical
engineering from the University of Zaragoza, Spain, in 1985 and
1991, respectively. He is Full Professor with the Departamento de
Informática e Ingeniería de Sistemas, University of Zaragoza,
where he is in charge of courses in robotics, computer vision, and
artificial intelligence. His research interests include
SLAM, perception and mobile robotics. Prof. Tardós is a member
of the I3A Robotics, Perception, and Real-Time Group</p>
</td>
</tr>
</tbody></table>
</figure>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  by <a href="http://dlmf.nist.gov/LaTeXML/" target="_blank">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"/></a>
</div></footer>
</div>


<script src="https://media.arxiv-vanity.com/render-output/5535659/index.js" type="text/javascript"></script>

<div class="arxiv-vanity-wrapper">
  <div class="container">
    <div class="mailing-list-form">
      <p>Want to hear about new tools we're making? Sign up to our mailing list for occasional updates.</p>
      <form class="" action="https://works.us5.list-manage.com/subscribe/post?u=78112dc49af57b49c0d96fd04&amp;id=f665613659" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div class="form-row  justify-content-center">
          <input class="form-control mx-3" style="width: 15em" type="email" value="" name="EMAIL"  id="mce-EMAIL" placeholder="Enter your email address">
          <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
          <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_78112dc49af57b49c0d96fd04_f665613659" tabindex="-1" value=""></div>
          <button type="submit" name="subscribe" id="mc-embedded-subscribe" class="btn btn-primary">Subscribe</button>
        </div>
      </form>
      <br>
      <p>If you find a rendering bug, <a href="https://github.com/arxiv-vanity/engrafo/issues">file an issue on GitHub</a>.
        Or, have a go at fixing it yourself – <a href="https://github.com/arxiv-vanity/engrafo">the renderer is open source</a>!</p>
      <p>For everything else, email us at <a href="/cdn-cgi/l/email-protection#5c3a3939383e3d3f371c3d2e24352a712a3d32352825723f3331"><span class="__cf_email__" data-cfemail="deb8bbbbbabcbfbdb59ebfaca6b7a8f3a8bfb0b7aaa7f0bdb1b3">[email&#160;protected]</span></a>.</p>
    </div>
  </div>
</div>
  



    <div class="arxiv-vanity-wrapper">
      <footer class="">
        <div class="container mb-3">
          <span>A project from <a href="https://replicate.ai">Replicate</a>, with help from <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML</a>.</span>
          <span><a href="https://github.com/arxiv-vanity">Contribute on GitHub.</a></span>
          <span><a href="/papers/">Latest papers.</a></span>
        </div>
      </footer>
    </div>

    
    
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    

    <script src="/static/js/main.7dd06b524c82.js"></script>
    
  <script src="/static/js/vendor/html2canvas.min.0e52edb30e4a.js"></script>
  <script src="/static/js/feedback.5f9a8bb787b6.js"></script>
  <script>
    

    // God we need a javascript build system
    function debounce(func, wait, immediate) {
      var timeout;
      return function() {
        var context = this, args = arguments;
        var later = function() {
          timeout = null;
          if (!immediate) func.apply(context, args);
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
      };
    };

    // Track reading a paper and how long spent reading paper
    // https://github.com/mixpanel/mixpanel-js/issues/184
    function trackPaperView() {
      var startTime;
      var maxScroll;

      function handlePageshow() {
        startTime = new Date().getTime();
        maxScroll = 0;
        mixpanel.track("View Paper", {"arxiv_id": "1502.00956"});
      }
      // pageshow event is used here instead of just running the code so it'll handles back/forward buttons
      // when page is frozen
      window.addEventListener('pageshow', handlePageshow, false);

      // Track how far down page user has scrolled
      // Based on https://github.com/googleanalytics/autotrack/blob/master/lib/plugins/max-scroll-tracker.js
      function handleScroll(event) {
        var html = document.documentElement;
        var body = document.body;
        var pageHeight = Math.max(html.offsetHeight, html.scrollHeight, body.offsetHeight, body.scrollHeight);
        var scrollPos = window.pageYOffset; // scrollY isn't supported in IE.
        var windowHeight = window.innerHeight;
        var scrollPercentage = Math.min(100, Math.max(0, Math.round(100 * (scrollPos / (pageHeight - windowHeight)))));
        if (scrollPercentage > maxScroll) {
          maxScroll = scrollPercentage;
        }
      }
      window.addEventListener('scroll', debounce(handleScroll, 500));

      function handleUnload() {
        var duration = new Date().getTime() - startTime;
        var data = {
          event: 'View Paper Exit',
          properties: {
            token: '84f8e700b4cf5e8ad68b553496eb72cf',
            arxiv_id: "1502.00956",
            max_scroll: maxScroll,
            // time_reading is in seconds.
            time_reading: parseFloat((duration / 1000).toFixed(3)),
          }
        };
        Object.assign(data.properties, mixpanel._.info.properties());
        Object.assign(data.properties, mixpanel['persistence'].properties());
        var newdata = btoa(JSON.stringify(data));
        navigator.sendBeacon('https://api.mixpanel.com/track/?ip=1&data=' + newdata);
      }
      window.addEventListener('beforeunload', handleUnload, false);
    };
    if (!mixpanel.has_opted_out_tracking()) {
      trackPaperView();
    }

    // Track clicking bibliography links
    mixpanel.track_links(".ltx_bibliography a", "Click Link In Bibliography", {
      "arxiv_id": "1502.00956",
      "tooltip": false
    });
    mixpanel.track_links(".ltx_cite a", "Click Link In Bibliography", {
      "arxiv_id": "1502.00956",
      "tooltip": true
    });

    // track_links isn't live, so we need to re-run when tooltips are opened
    if (window.MutationObserver) {
      var obs = new MutationObserver(function(mutations, observer) {
        var selector = ".tippy-popper .ltx_bibitem a";
        // mixpanel throws error if nothing is selected
        if (document.querySelector(selector)) {
          mixpanel.track_links(selector, "Click Link In Bibliography", {
            "arxiv_id": "1502.00956",
            "tooltip": true
          })
        }
      });
      obs.observe(document.body, {childList: true})
    }

  </script>

  </body>
</html>
